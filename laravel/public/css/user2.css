 
 var topLevelDomain = "xiaozhu.com";
var domain = "www.xiaozhu.com";
var webimIframUrl = "http://xiaozhu.com/webim.html";
var uploadImageUrl = "http://image2.xiaozhustatic2.com/imgin4uploadify.php";
var jciUrl = "http://jci.xiaozhustatic1.com";
var webimYUI = "{{{webimYUI}}}";
var webimV2 = "{{{webimV2}}}";
var client_id_youku = '16edde5f79e61324'; 

document.domain = topLevelDomain;

var hostArray = window.location.hostname.split('.');
if (hostArray.length == 5 && hostArray[2] == 'partner') {
    topLevelDomain = hostArray[1] + '.' + hostArray[2] + '.xiaozhu.com';
} else if (hostArray.length == 4 && hostArray[1] == 'partner') {
    topLevelDomain = hostArray[0] + '.' + hostArray[1] + '.xiaozhu.com';
}

if (typeof(window.jQuery) != "undefined")
{
    if ($("#head_newmsg2"))
    {
        $("#head_newmsg2").hover(
            function () {
                $("#head_newmsg2 a.icon_arrowB").addClass("nav_current");
                $("#head_newmsg2 a.icon_arrowB").removeClass("icon_arrowB");
                $("#head_newmsg2 div.nav_pop ").show();
            },
            function () {
                $("#head_newmsg2 a.nav_current").addClass("icon_arrowB");
                $("#head_newmsg2 a.nav_current").removeClass("nav_current");
                $("#head_newmsg2 div.nav_pop ").hide();
            }
        );
    }
}

function tipBackyardSuccess(classname)
{
    if (typeof(classname) == 'undefined' || classname == '')
        classname = 'tips_right';

    $('.'+classname).show();

    var displayText = 3;
    var showtime=setInterval(function(){
    if(displayText>0)
    {
        displayText--;
        $('.'+classname).show();
    }
    else {
        $('.'+classname).hide();
        clearInterval(showtime);
    }
    },1000);
}

function tipBackyardError(errmsg,classname)
{
    if (typeof(classname) == 'undefined' || classname == '')
        classname = 'tips_error';

    $('.'+classname).html(errmsg);
    $('.'+classname).show();

    var displayText = 3;
    var showtime=setInterval(function(){
    if(displayText>0)
    {
        displayText--;
        $('.'+classname).show();
    }
    else {
        $('.'+classname).hide();
        clearInterval(showtime);
    }
    },1000);
}

function tipBackyardReset(classnameSucc, classnameErr)
{
    if (typeof(classnameSucc) == 'undefined' || classnameSucc == '')
        classnameSucc = 'tips_right';
    $('.'+classnameSucc).hide();

    if (typeof(classnameErr) == 'undefined' || classnameErr == '')
        classnameErr = 'tips_error';
    $('.'+classnameErr).hide();

}
function loadNyroModal()
{
}
 
 var XZWebUrlWriter = {
    getWebPhp : function () {
        return 'xzweb.php';
    },
    getAjaxPhp : function () {
        return 'ajax.php';
    },
    getRequest : function(url,type) {
        var nexturl = $('input[name=next]').val();
        //if (nexturl).next = nexturl;
        var returnData;
        type = (type == undefined) ? 'json' : type;
       
        $.ajax({
            type     : "GET",
            url      : url,
            dataType : type,
            async    : false,
            data     : {'_':Math.random()},
            success  : function(datas){returnData = datas;},
            error : function (XMLHttpRequest, textStatus, errorThrown){
                alert('网络错误,请刷新页面重试:'+textStatus);
            }
        });
        return returnData;
    },
    postRequest : function(url,requestParam) {
        if (!requestParam) var requestParam = {};
        var nexturl = $('input[name=next]').val();
        if (nexturl) requestParam.next = nexturl;
        var returnData;
        $.ajax({
            type     : "POST",
            url      : url,
            data     : requestParam,
            dataType : 'json',
            async    : false,
            success  : function(datas){returnData = datas;},
            error : function (XMLHttpRequest, textStatus, errorThrown){
                alert('网络错误,请刷新页面重试:'+textStatus);
            }
        });
        return returnData;
    },
    getWebIm_ServerUrl: function() {
        return 'http://'+domain+'/webim.php?op=getServerUrl';
    },
    getWebIm_DrawIframeUrl : function (userid) {
        return 'http://'+domain+'/webim.php?op=drawIframe&userid=' + userid;
    },
    getWebIm_DrawBaseBtnUrl: function(next) {
        return 'http://'+domain+'/webim.php?op=drawImBaseBtn&next=' + next;
    },
    getWebIm_DrawZhunaIframeUrl : function () {
        return 'http://'+domain+'/webim.php?op=drawZhunaIframe';
    },
    getWebIm_IframeUrl : function (userId) {
        return webimIframUrl;
    },
    getWebIm_LodgeUnitData: function (roomid) {
        return 'http://'+domain+'/webim.php?op=getLodgeUnitData&roomid=' + roomid;
    },
    getWebIm_FavoriteList: function (userid) {
        return 'http://'+domain+'/webim.php?op=getFavoriteList&userid=' + userid;
    },
    getWebIm_RequestNotificationUrl : function (userid) {
        return 'http://'+domain+'/webim.php?op=getNotification&terminal=all_web&userid=' + userid;
    },
    getWebIm_RequestUserSysNoticeCnt : function (userid, userrole) {
        return 'http://'+domain+'/webim.php?op=getUserSysNoticeCnt&userid=' + userid + '&userrole=' + userrole;
    },
    getWebIm_RequestUserSysNotice : function (userid, userrole) {
        return 'http://'+domain+'/webim.php?op=getUserSysNotice&userid=' + userid + '&userrole=' + userrole;
    },
    getWebIm_UserData : function(userid) {
        return 'http://'+domain+'/webim.php?op=getUserData&userid=' + userid;
    },
    getWebIm_talkHis : function(isTenant,offset,length) {
        return 'http://'+doamin+'/webim.php?op=loadTalkHis&isTenant=' + isTenant + '&offset=' + offset + '&length=' + length + '&userId=' + currentUser; 
    },
    getWebIm_talkMagHis: function(tenantId,luId,length,lastMessageId) {
        return 'http://'+domain+'/webim.php?op=loadTalkMsgHis&tenantId= ' + tenantId + '&luId=' + luId +'&length=' + length + '&lastMessageId= ' + lastMessageId;
    },
    getWebIm_TalkHisUrl : function (landlordid, tenantid, objid, userid) {
        return 'http://'+domain+'/webim.php?op=getTalkHisUrl&landlordid=' + landlordid + '&tenantid=' + tenantid + '&objid=' + objid + '&userid=' + userid + '&_t=' + new Date().getTime();
    },
    getWebIm_RequestFastReplyUrl : function (userid) {
        return 'http://'+domain+'/webim.php?op=getFastReply&userid=' + userid + '&_t=' + new Date().getTime();
    },
    getWebIm_FangDongSpecialLodgeUnitUrl : function (userid) {
        return "http://" + topLevelDomain + "/fangdong/" + userid +"/fangzi.html";
    },
    getWebIm_RequestRecommendLuUrl : function (userid) {
        return 'http://'+domain+'/webim.php?op=getRecommendLuList&userid=' + userid;
    },
    getWebIm_RequestUserStateUrl : function (userid,imuserrole) {
        return 'http://'+domain+'/webim.php?op=getUserState&userid=' + userid + '&imuserrole=' + imuserrole;
    },
    getWebIm_RequestSynTalkMsgUrl: function (userid,synMinTime,synMaxTime) {
        return 'http://'+domain+'/webim.php?op=SynTalkMsg&userId=' + userid + '&synMinTime=' + synMinTime + '&synMaxTime=' + synMaxTime;
    },
    getWebIm_RequestTalkMsgSetRead: function(tenantId,luId,isTenant) {
        return 'http://'+domain+'/webim.php?op=talkMsgSetRead&tenantId=' + tenantId + '&luId=' + luId + '&isTenant=' + isTenant + '&_t=' + new Date().getTime();
    },
    getWebIm_AlipayTrustZMInfoPair : function (applyUserId,ownerUserId) {
        return 'http://'+domain+'/ajax.php?op=Ajax_GetZminfo_Pair&applyUserId=' + applyUserId + '&ownerUserId='+ownerUserId+'&_t=' + new Date().getTime();
    },
    getWebIm_AlipayTrustLayer : function (landlordid) {
        return 'http://'+domain+'/webim.php?op=getAlipayTrustLayer&landlordid=' + landlordid + '&_t=' + new Date().getTime();
    },
    getWebIm_CheckKeywordUrl : function (dataArr, type) {
        return 'http://greatwall.xiaozhu.com/greatwall.php?content=' + JSON.stringify(dataArr) + '&type=' + type + '&_t=' + new Date().getTime();
    },
    getWebIm_AllFriendAndLuData : function (allfriendid,allluid) {
        return 'http://'+domain+'/webim.php?op=getAllFriendAndLuData&userlist=' + allfriendid + '&lulist=' + allluid + '&_t=' + new Date().getTime();
    },
    getWeb_NoticeReachedFeedbackUrl : function (timerid,operate) {
        return 'http://'+domain+'/xzweb.php?op=NotificationReachedFeedback&timerid=' + timerid + '&operate=' + operate;
    },

    getWeb_InfoEventReachUrl : function (timerid,operate,receiverId) {
        return 'http://'+domain+'/xzweb.php?op=InfoEventReach&timerid=' + timerid + '&operate=' + operate + '&receiverid='+receiverId;
    },

    getInfoEventDealActionUrl : function (dealaction,objid,objtype,receiverid,displaystrategy) {
        return 'http://'+domain+'/xzweb.php?op=GetInfoEventDealActionUrl&dealaction=' + dealaction + '&objid=' + objid + '&objtype=' + objtype + '&receiverid=' + receiverid + '&displaystrategy='+displaystrategy;
    },

    getWeb_FangDong_FangDong_ShowLetter: function() {
        return 'http://'+domain+'/xzweb.php?op=FangDong_ShowLetter';
    },
    getWeb_FangKe_FangKe_ShowLetter: function() {
        return 'http://'+domain+'/xzweb.php?op=FangKe_ShowLetter';
    },
    getWeb_FangKe_Special_Index: function(tenantid) {
        return 'http://'+domain+'/xzweb.php?op=Front_FangKe_Special_Index&tenantid=' + tenantid;
    },
    getWeb_FangDong_Special_Index: function(landlordid) {
        return 'http://'+domain+'/xzweb.php?op=Front_FangDong_Special_Index&landlordid=' + landlordid;
    },
    getWeb_FangDong_ResetFastReplyUrl : function () {
        return 'http://'+domain+'/xzweb.php?op=FangDong_ChatSet';
    },
    getWeb_FangDong_NoticeUrl : function () {
        return 'http://'+domain+'/xzweb.php?op=FangDong_ShowSysNotice';
    },
    getWeb_FangKe_NoticeUrl : function () {
        return 'http://'+domain+'/xzweb.php?op=FangKe_ShowSysNotice';
    },

    getWeb_FangKe_DoPostCommentUrl : function () {
        return 'http://'+domain+'/xzweb.php?op=FangKe_DoPostComment';
    },
    getWeb_FangDong_DoPostCommentUrl : function (objId,bookorderId,content,commentScore,fkTag) {
        return 'http://'+domain+'/xzweb.php?op=FangDong_DoPostComment&objId=' + objId + '&bookorderId=' + bookorderId + '&content=' + content + commentScore + '&fkTag=' + fkTag;
    },
    getWeb_FangKe_IndexUrl : function () {
        return 'http://'+domain+'/xzweb.php?op=FangKe_Index';
    },
    getWeb_FangDong_IndexUrl : function () {
        return 'http://'+domain+'/xzweb.php?op=FangDong_Index';
    },
    getWeb_FangKe_AddCommentUrl : function (bookorderId) {
        return 'http://'+domain+'/xzweb.php?op=FangKe_Comment_Self&bookorderid=' + bookorderId + '&random=' + new Date().getTime();
    },
    getWeb_FangKe_DeleteTenantUrl : function (tenantId) {
        return 'http://'+domain+'/xzweb.php?op=FangKe_DeleteUserTenant&tenantId=' + tenantId;
    },
    getWeb_FangKe_UserTenantDetailUrl : function (tenantId) {
        return 'http://'+domain+'/xzweb.php?op=FangKe_UserTenantDetail&tenantId=' + tenantId;
    },
    getWeb_FangKe_EditUserTenantUrl : function (tenantId,realName,tenantSex,ageGroup,cardType,cardNo,yearOfBirth,monthOfBirth,dayOfBirth,mobile,phonecode) {
        return 'http://'+domain+'/xzweb.php?op=FangKe_UpdateUserTenant&tenantId=' + tenantId + '&realName=' + realName + '&tenantSex=' + tenantSex + '&ageGroup=' + ageGroup + '&cardType=' + cardType + '&cardNo=' + cardNo + '&yearOfBirth=' + yearOfBirth + '&monthOfBirth=' + monthOfBirth + '&dayOfBirth=' + dayOfBirth + '&mobile=' + mobile + '&phonecode=' + phonecode + '&random=' + new Date().getTime();
    },
    getWeb_FangKe_EditHaiwaiUserTenantUrl : function (tenantId,realName,tenantSex,ageGroup,cardType,cardNo,yearOfBirth,monthOfBirth,dayOfBirth,email) {
        return 'http://'+domain+'/xzweb.php?op=FangKe_UpdateUserTenant&tenantId=' + tenantId + '&realName=' + realName + '&tenantSex=' + tenantSex + '&ageGroup=' + ageGroup + '&cardType=' + cardType + '&cardNo=' + cardNo + '&yearOfBirth=' + yearOfBirth + '&monthOfBirth=' + monthOfBirth + '&dayOfBirth=' + dayOfBirth + '&email=' + email + '&random=' + new Date().getTime();
    },
    getWeb_GetCityUrl : function (provinceId) {
        return 'http://'+domain+'/xzweb.php?op=Pub_SelCityJson&provinceid=' + provinceId ;
    },
    getFangDong_CutUserHeadImageFrameUrl : function (headImageUrl) {
        return 'http://'+domain+'/xzweb.php?op=FangDong_CutUserHeadImageFrame&headImageUrl='+headImageUrl;
    },
    /*07-03*/
    getFangDong_SetNoticeSetUrl : function (smsLodgeunitSucc,smsBookorderTimeout,smsPayTimeout,smsNewComment,emailLodgeunitSucc,emailBookorderTimeout,emailPayTimeout,emailNewComment) {
        return 'http://'+domain+'/xzweb.php?op=FangDong_NoticeSetSub&sms_lodgeunitsucc='+smsLodgeunitSucc+'&sms_bookordertimeout='+smsBookorderTimeout+'&sms_paytimeout='+smsPayTimeout+'&sms_newcomment='+smsNewComment+'&email_lodgeunitsucc='+emailLodgeunitSucc+'&email_bookordertimeout='+emailBookorderTimeout+'&email_paytimeout='+emailPayTimeout+'&email_newcomment='+emailNewComment+'&random'+new Date().getTime();
    },
    getFangDong_OrderByStateUrl : function (orderState,pageNo,sortType) {
        sortType = ('undefined' !== typeof sortType) ? sortType : "";
        return 'http://'+domain+'/xzweb.php?op=FangDong_OrderByState&orderState='+orderState+'&sortType='+sortType+'&p='+pageNo+'&random='+new Date().getTime();
    },
    getFangDong_SetBankPaymentUrl : function (id, ownerId) {
        return 'http://'+domain+'/xzweb.php?op=FangDong_SetBankPayment&id='+id+'&ownerid='+ownerId;
    },
    getFangDong_SetAlipayPaymentUrl : function (id, ownerId) {
        return 'http://'+domain+'/xzweb.php?op=FangDong_SetAlipayPayment&id='+id+'&ownerid='+ownerId;
    },
    getFangDong_GetTenpayInfoUrl : function (id, ownerId) {
        return 'http://'+domain+'/xzweb.php?op=FangDong_GetTenpayInfo&id='+id+'&ownerid='+ownerId;
    },
    getFront_Login_KernelUrl : function () {
        return 'http://'+domain+'/xzweb.php?op=Front_Login_Kernel';
    },
    getFront_Register_KernelUrl : function () {
        return 'http://'+domain+'/xzweb.php?op=Front_Register_Kernel';
    },
    getFront_DetailPageMapUrl : function (luid) {
        return 'http://'+domain+'/xzweb.php?op=Front_DetailPageMap&id='+luid;
    },
    getFront_Login_SubmitUrl : function () {
        return 'http://'+domain+'/xzweb.php?op=Front_Login_Submit';
    },
    getFront_BookOrderPayFail : function (orderId) {
        return 'http://'+domain+'/xzweb.php?op=Front_BookOrderPayFail&bookorderid='+orderId;
    },

    getAjax_RegisterWithPhoneAndPass : function () {
        return 'http://'+domain+'/ajax.php?op=Ajax_RegisterWithPhoneAndPass';
    },
    getAjax_SendCommentShareUrl : function (commentid, source) {
        return 'http://'+domain+'/ajax.php?op=Ajax_SendCommentShare&commentid='+commentid+'&source='+source+'&random='+new Date().getTime();
    },
    getAjax_CommentShareUrl : function (commentid) {
        return 'http://'+domain+'/ajax.php?op=Ajax_CommentShare&commentid='+commentid+'&random='+new Date().getTime();
    },
    getAjax_CommentFangKeShareUrl : function (commentid) {
        return 'http://'+domain+'/ajax.php?op=Ajax_CommentFangKeShare&commentid='+commentid+'&random='+new Date().getTime();
    },
    getAjax_FangKe_BookOrder_RefundShowUrl : function (bookOrderId) {
        return 'http://'+domain+'/ajax.php?op=Ajax_FangKe_BookOrder_RefundShow&bookOrderId='+bookOrderId;
    },
    getAjax_SaveDefaultUserHeadImageUrl : function (imgId) {
        return 'http://'+domain+'/ajax.php?op=Ajax_SaveDefaultUserHeadImage&id='+imgId;
    },
    getAjax_SaveUserHeadImageUrl : function (imgurl, gcx, gcy, gcw, gch) {
        return 'http://'+domain+'/ajax.php?op=Ajax_SaveUserHeadImage&imgurl='+encodeURIComponent(imgurl)+'&x='+gcx+'&y='+gcy+'&w='+gcw+'&h='+gch;
    },
    /*07-03*/
    getAjax_PostReplyUrl : function (replycontent,rcid,commentType) {
        return 'http://'+domain+'/ajax.php?op=Ajax_PostReply&content='+replycontent+'&rcid='+rcid+'&commentType='+commentType;
    },
    getAjax_PostReplyShareUrl : function (replyid) {
        return 'http://'+domain+'/ajax.php?op=Ajax_PostReplyShare&replyId='+replyid+'&random='+new Date().getTime();
    },
    getAjax_DelReplyUrl : function (replyid) {
        return 'http://'+domain+'/ajax.php?op=Ajax_DelReply&data='+replyid;
    },
    getAjax_DelCommentUrl : function () {
        return 'http://'+domain+'/ajax.php?op=Ajax_DelComment';
    },
    getAjax_BookOrderCancelReasonUrl : function (bookorderId, rejectType, rejectText) {
        return 'http://'+domain+'/ajax.php?op=Ajax_BookOrderCancelReason&bookorderid='+bookorderId+'&cancelType='+rejectType+'&cancelReason='+encodeURIComponent(rejectText);
    },
    getAjax_FangKe_CheckInCodeVerifyUrl : function (bookorderId,code) {
        return 'http://'+domain+'/ajax.php?op=Ajax_FangKe_CheckInCodeVerify&orderid='+bookorderId+'&code='+code;
    },
    getAjax_DelUserPaymentUrl : function (id) {
        return 'http://'+domain+'/ajax.php?op=Ajax_DelUserPayment&id='+id;
    },
    getAjax_BankCityJsonUrl : function (provinceId) {
        return 'http://'+domain+'/ajax.php?op=Ajax_BankCityJson&provinceid='+provinceId;
    },
    getAjax_BankJsonUrl : function (bankName,bankProviceId,bankCityId) {
        return 'http://'+domain+'/ajax.php?op=Ajax_BankJson&banktypeid='+bankName+'&bankprovinceid='+bankProviceId+'&bankcityid='+bankCityId;
    },
    getAjax_CheckTenpayInfoParam : function (tenpayno,tenpayusername) {
        return 'http://'+domain+'/ajax.php?op=Ajax_CheckTenpayInfo&tenpayno='+tenpayno+'&tenpayusername='+tenpayusername;
    },
    getAjax_GetDefaultLandMarkUrl : function (cityDomain) {
        return 'http://'+domain+'/ajax.php?op=Ajax_GetDefaultLandMark&domain='+cityDomain;
    },
    /*08-19*/
    getAjax_CheckLodgeUnitUrl : function (cityDomain) {
        return 'http://'+domain+'/ajax.php?op=Ajax_CheckLodgeunit&luid='+cityDomain;
    },
    getAjax_CheckSearchConditionUrl : function (searchCity,cityDomain,startDate,endDate) {
        return 'http://'+domain+'/ajax.php?op=Ajax_CheckSearchCondition&searchCity='+searchCity+"&cityDomain="+cityDomain+"&startDate="+startDate+"&endDate="+endDate;
    },
    getAjax_BuildFilterSearchUrl : function (partner,startDate,endDate,citydomain,putkey,keywordType,keywordValue,checkedHouseType,checkedfacilities,checkedrentType,guestnum,price) {
        return 'http://'+domain+'/ajax.php?op=Ajax_BuildFilterSearch&partner='+partner+'&startDate='+startDate+'&endDate='+endDate+'&citydomain='+citydomain+'&putkey='+putkey+'&keywordType='+keywordType+'&keywordValue='+keywordValue+'&housetyperoomcnt='+checkedHouseType+'&facilities='+checkedfacilities+'&leasetype='+checkedrentType+'&guestnum='+guestnum+'&price='+price; 
    },
    getAjax_GetDatas4Map : function (partner,startDate,endDate,city,putkey,district,landmark,checkedHouseType,checkedfacilities,checkedrentType,guestnum,lowprice,highprice,pageNo,sort) {
        return 'http://'+domain+'/ajax.php?op=Ajax_GetDatas4Map&partner='+partner+'&startDate='+startDate+'&endDate='+endDate+'&city='+city+'&putkey='+putkey+'&district='+district+'&landmark='+landmark+'&housetyperoomcnt='+checkedHouseType+'&facilities='+checkedfacilities+'&leasetype='+checkedrentType+'&guestnum='+guestnum+'&lowprice='+lowprice+'&highprice='+highprice+'&pageno='+pageNo+'&sort='+sort; 
    },
    getAjax_GetMapDatasLodgeUnit : function (partner,startDate,endDate,city,putkey,district,landmark,checkedHouseType,checkedfacilities,checkedrentType,guestnum,lowprice,highprice,pageNo,sort,radius,lat,lng) {
        return 'http://'+domain+'/ajax.php?op=Ajax_GetDatas4MapLodgeUnit&partner='+partner+'&startDate='+startDate+'&endDate='+endDate+'&city='+city+'&putkey='+putkey+'&district='+district+'&landmark='+landmark+'&housetyperoomcnt='+checkedHouseType+'&facilities='+checkedfacilities+'&leasetype='+checkedrentType+'&guestnum='+guestnum+'&lowprice='+lowprice+'&highprice='+highprice+'&pageno='+pageNo+'&sort='+sort+'&radius='+radius+'&lat='+lat+'&lng='+lng; 
    },
    getAjax_getDatasMapLodgeunit4Page : function (partner,startDate,endDate,city,putkey,district,landmark,checkedHouseType,checkedfacilities,checkedrentType,guestnum,lowprice,highprice,pageNo,sort,radius,lat,lng) {
        return 'http://'+domain+'/ajax.php?op=Ajax_getDatasMapLodgeunit4Page&partner='+partner+'&startDate='+startDate+'&endDate='+endDate+'&city='+city+'&putkey='+putkey+'&district='+district+'&landmark='+landmark+'&housetyperoomcnt='+checkedHouseType+'&facilities='+checkedfacilities+'&leasetype='+checkedrentType+'&guestnum='+guestnum+'&lowprice='+lowprice+'&highprice='+highprice+'&pageno='+pageNo+'&sort='+sort+'&radius='+radius+'&lat='+lat+'&lng='+lng; 
    },
    getAjax_doFullTextSearch4Map : function (offset,url) {
        return 'http://'+domain+'/ajax.php?op=Ajax_doFullTextSearch4Map&offset='+offset+'&url='+encodeURIComponent(url);
    },
    getAjax_GetBookLodgeUnitDetailUrl : function (lodgeId,sameRoomNum,startDate,endDate) {
        return "http://"+domain+"/ajax.php?op=Ajax_GetBookLodgeUnitDetail&lodgeId="+lodgeId+"&sameRoomNum="+sameRoomNum+"&startdate="+startDate+"&enddate="+endDate+"&rand="+new Date().getTime();
    },
    getAjax_GetOrderPriceDetailUrl : function (bookOrderId) {
        return "http://"+domain+"/ajax.php?op=Ajax_GetOrderPriceDetail&bookOrderId="+bookOrderId+"&rand="+new Date().getTime();
    },
    getAjax_GetLazyInfoUrl : function (memkey,memtimeout,turl) {
        return "http://"+domain+"/ajax.php?op=Ajax_LoadInfo&memkey="+memkey+"&memtimeout="+memtimeout+"&turl="+turl;
    },
    getAjax_AddFeedbackUrl : function (problem,contact,imageParam) {
        return "http://"+domain+"/ajax.php?op=Ajax_Add_Feedback&problem="+problem+"&contact="+contact+"&imageParam="+imageParam;
    },
    getAjax_GetFeedbackUrl : function () {
        return "http://"+domain+"/ajax.php?op=Ajax_Get_Feedback";
    },




    getAjax_GetVerifyCode : function () {
        return "http://"+domain+"/ajax.php?op=AJAX_GetVerifyCode&nocache="+new Date().getTime();
    },
    getAjax_CheckMobileExist : function (mobile) {
        return 'http://'+domain+'/ajax.php?op=AJAX_CheckMobileExist&mobile=' + mobile;
    },
    getAjax_CheckRegistExist : function () {
        return 'http://'+domain+'/ajax.php?op=AJAX_CheckRegistExist';
    },
    getAjax_CheckUsernameExist : function (username) {
        return 'http://'+domain+'/ajax.php?op=AJAX_CheckUsernameExist&username=' + encodeURIComponent(username);
    },
    getAjax_CheckOldUsernameExist : function (username) {
        return 'http://'+domain+'/ajax.php?op=AJAX_CheckOldUsernameExist&username=' + username;
    },
    getAjax_CheckEmailExist : function () {
        return 'http://'+domain+'/ajax.php?op=AJAX_CheckEmailExist';
    },
    getAjax_CheckVerifyCode : function () {
        return 'http://'+domain+'/ajax.php?op=AJAX_CheckVerifyCode';
    },
    getAjax_SendActivateCode : function (mobile, verifyCode) {
        return 'http://'+domain+'/limajax/AJAX_SendActivateCode?mobile='+ mobile +'&verifycode='+ verifyCode + '&rand='+new Date().getTime();
    },
    getAjax_SendAmendPassCode : function (mobile, verifyCode) {
        return 'http://'+domain+'/limajax/AJAX_SendAmendPassCode?mobile='+ mobile +'&verifycode='+ verifyCode + '&rand='+new Date().getTime();
    },
    getAjax_CheckActiveCode : function (mobile,activateCode) {
        return 'http://'+domain+'/ajax.php?op=AJAX_CheckActivateCode&mobile='+mobile+'&activatecode='+activateCode +'&rand='+new Date().getTime();
    },
    getAjax_CheckInviteCode : function (inviteCode) {
        return 'http://'+domain+'/ajax.php?op=AJAX_CheckInviteCode&invitecode='+inviteCode;
    },
    getAjax_SendConfirmCode : function (mobile, verifyCode) {
        return 'http://'+domain+'/ajax.php?op=AJAX_SendConfirmCode&mobile='+ mobile +'&verifycode='+ verifyCode + '&rand='+new Date().getTime();
    },
    getAjax_SendQuickLoginCode : function(mobile, verifyCode){
        return 'http://'+domain+'/ajax.php?op=AJAX_SendQuickLoginCode&mobile='+ mobile +'&verifycode='+ verifyCode + '&rand='+new Date().getTime();
    },
    getAjax_CheckConfirmCode : function (mobile,confirmCode) {
        return 'http://'+domain+'/ajax.php?op=AJAX_CheckConfirmCode&mobile='+mobile+'&confirmcode='+confirmCode +'&rand='+new Date().getTime();
    },
    getAjax_VerifyCodeFirstShow : function () {
        return 'http://'+domain+'/ajax.php?op=AJAX_VerifyCodeFirstShow&rand='+new Date().getTime();
    },
    getAjax_Login : function () {
        return 'http://'+domain+'/ajax.php?op=AJAX_Login';
    },
    getAjax_LoginMobile : function () {
        return 'http://'+domain+'/ajax.php?op=AJAX_LoginMobile';
    },
    getAjax_RegisterByMobile : function () {
        return 'http://'+domain+'/ajax.php?op=AJAX_RegisterByMobile';
    },
    getAjax_RegisterByEmail : function () {
        return 'http://'+domain+'/ajax.php?op=AJAX_RegisterByEmail';
    },
    getAjax_FindPasswordByEmail : function () {
        return 'http://'+domain+'/ajax.php?op=AJAX_ResetPasswordByEmail';
    },
    getAjax_ResetPasswordFromEmail : function () {
        return 'http://'+domain+'/ajax.php?op=AJAX_ResetPasswordFromEmail';
    },
    getAjax_SendRegValidateEmailUrl : function(email,next){
        return 'http://'+domain+'/ajax.php?op=AJAX_SendRegValidateEmail&email='+encodeURIComponent(email)+'&next='+encodeURIComponent(next)+'&random='+new Date().getTime();
    },
    getAjax_FindPasswordByMobile : function () {
        return 'http://'+domain+'/ajax.php?op=AJAX_ResetPasswordByMobile';
    },
    getAjax_AmendPasswordByMobile : function (){
        return 'http://'+domain+'/ajax.php?op=AJAX_AmendPasswordByMobile';
    },
    getAjax_AmendPasswordByEmail : function (){
        return 'http://'+domain+'/ajax.php?op=AJAX_AmendPasswordByEmail';
    },
    getAjax_BindOpenAccount : function () {
        return 'http://'+domain+'/ajax.php?op=AJAX_BindOpenAccount';
    },
    getAjax_OpenAccountRegister : function () {
        return 'http://'+domain+'/ajax.php?op=AJAX_OpenAccountRegister';
    },
    getAjax_ReSendActiveEmail : function (uid, uidtoken) {
        return 'http://'+domain+'/ajax.php?op=Ajax_ReSendActiveEmail&uid=' + uid + '&uidtoken=' + uidtoken;
    },
    getAjax_ChangeActiveEmail : function () {
        return 'http://'+domain+'/ajax.php?op=Ajax_ChangeActiveEmail';
    },














    getAjax_CheckNickNameUrlNoParam: function () {
        return "http://"+domain+"/ajax.php?op=Ajax_CheckNickName";
    },

    getAjax_GetPicCheckCodeShowUrl : function () {
        return "http://"+domain+"/ajax.php?op=AJAX_PicCheckCodeShow&nocache="+new Date().getTime();
    },
    getAjax_GetSendMessageAppDownloadUrl: function (mobile,checkcode) {
        return "http://"+domain+"/ajax.php?op=Ajax_Send_Message_App_Download_Url&mobile="+mobile+"&checkcode="+checkcode+"&rand="+new Date().getTime();
    },
    getAjax_SendSms4AppDownloadUrl: function (mobile,checkcode,apptype) {
        return "http://"+domain+"/ajax.php?op=Ajax_SendSms4AppDownload&mobile="+mobile+"&checkcode="+checkcode+"&apptype="+apptype+"&rand="+new Date().getTime();
    },
    getAjax_CheckUserPasswordUrl : function () {
        return 'http://'+domain+'/ajax.php?op=Ajax_CheckUserPassword';
    },
    getAjax_CheckPhone : function () {
        return 'http://'+domain+'/ajax.php?op=Ajax_CheckPhone';
    },
    getAjax_CheckEmailUrl: function (email) {
        return "http://"+domain+"/ajax.php?op=Ajax_CheckEmail&email="+email+"&random="+new Date().getTime();
    },
    getAjax_CheckEmailUrlNoParam: function () {
        return "http://"+domain+"/ajax.php?op=Ajax_CheckEmail";
    },
    getAjax_SendActiveEmailUrl: function (email) {
        return "http://"+domain+"/ajax.php?op=Ajax_Send_Active_Email&email="+email;
    },
    getAjax_ReadSysNoticeUrl: function (messageId) {
        return "http://"+domain+"/ajax.php?op=Ajax_ReadSysNotice&msgId="+messageId;
    },
    getAjax_DelSysNoticeUrl : function (messageId) {
        return 'http://'+domain+'/ajax.php?op=Ajax_DelSysNotice&msgId='+messageId;
    },
    getAjax_SetChatReplyUrl : function (replys) {
        return 'http://'+domain+'/ajax.php?op=Ajax_SetChatReply&data='+encodeURIComponent(replys)+'&_t='+new Date().getTime();
    },
    getAjax_ResetChatReplyUrl : function (replys) {
        return 'http://'+domain+'/ajax.php?op=Ajax_ResetChatReply&data='+encodeURIComponent(replys)+'&_t='+new Date().getTime();
    },
    getAjax_SmsCheckCodeSendUrl : function (phonenum,imagecode,aisle) {
        return 'http://'+domain+'/ajax.php?op=AJAX_SmsCheckCodeSend&phone='+phonenum+'&checkcode='+imagecode+'&aisle='+aisle;
    },
    getAjax_SetUserPhoneCodeUrl : function (phonenum,phonecode,type) {
        if('undefined' !== typeof type)
        {
            return 'http://'+domain+'/ajax.php?op=Ajax_SetUserPhoneCode&phone='+phonenum+'&phonecode='+phonecode+'&type='+type;
        }else
        {
            return 'http://'+domain+'/ajax.php?op=Ajax_SetUserPhoneCode&phone='+phonenum+'&phonecode='+phonecode;
        }
    },
    getAjax_SmsCheckCodeVerifyUrl : function (phonenum,phonecode) {
        return 'http://'+domain+'/ajax.php?op=AJAX_SmsCheckCodeVerify&phone='+phonenum+'&phonecode='+phonecode;
    },
    getAjax_Front_SendPhoneCode : function (phonenum,imagecode,aisle) {
        return 'http://'+domain+'/ajax.php?op=Ajax_SendPhoneCode&phone='+phonenum+'&checkcode='+imagecode+'&aisle='+aisle+'&rand='+new Date().getTime();
    },
    getAjax_Front_SendPhoneCodeByPhone : function (phonenum,imagecode,aisle) {
        return 'http://'+domain+'/ajax.php?op=AJAX_SendPhoneCodeByPhone&phone='+phonenum+'&checkcode='+imagecode+'&aisle='+aisle+'&rand='+new Date().getTime();
    },
    getAjax_PhoneIsNotExist_PhoneIsLoginUserUrl : function (phonenum) {
        return 'http://'+domain+'/ajax.php?op=AJAX_PhoneIsNotExist_PhoneIsLoginUser&phone='+phonenum;
    },
    getAjax_UnbindSnsOpenIdUrl : function (shareType) {
        return 'http://'+domain+'/ajax.php?op=AJAX_UnbindSnsOpenId&shareType='+shareType;
    },
    getAjax_FangKeOrderList_OrderByTimeUrl : function (ordertype, createtype, p) {
        return 'http://'+domain+'/ajax.php?op=Ajax_FangKeOrderList_OrderByTime&orderType='+ordertype+'&bookOrderCreateType='+createtype+'&p='+p+'&random='+new Date().getTime();
    },
    getAjax_FangKe_BookOrder_RefundDetailUrl : function (bookOrderId) {
        return 'http://'+domain+'/ajax.php?op=Ajax_FangKe_BookOrder_RefundDetail&bookOrderId='+bookOrderId;
    },
    getAjax_FangKe_InsurancePlanUrl : function (bookOrderTenantId) {
        return 'http://'+domain+'/ajax.php?op=Ajax_FangKe_InsurancePlan&bookOrderTenantId='+bookOrderTenantId;
    },
    getAjax_FangKe_RejectCashPledgeUrl : function (bookOrderId) {
        return 'http://'+domain+'/ajax.php?op=Ajax_FangKe_RejectCashPledge&bookOrderId='+bookOrderId;
    },
    getAjax_FangKe_ConfirmCashPledgeUrl : function (bookOrderId) {
        return 'http://'+domain+'/ajax.php?op=Ajax_FangKe_ConfirmCashPledge&bookOrderId='+bookOrderId;
    },
    getAjax_FangKe_ServiceCashPledgeUrl : function (bookOrderId) {
        return 'http://'+domain+'/ajax.php?op=Ajax_FangKe_ServiceCashPledge&bookOrderId='+bookOrderId;
    },

    getAjax_GetMoreTalkUrl : function (talkid,rows,requestTime) {
        return 'http://'+domain+'/ajax.php?op=Ajax_GetMoreTalk&talkid='+talkid+'&rows='+rows+'&_t='+requestTime;
    },
    getAjax_GetSettleAccountDetailUrl : function (orderId,pageNo) {
        return 'http://'+domain+'/ajax.php?op=Ajax_GetSettleAccountDetail&orderId='+orderId+'&p='+pageNo;
    },
    getAjax_FangDong_LuPromotionConditionUrl : function (luid) {
        return 'http://'+domain+'/ajax.php?op=Ajax_FangDong_LuPromotionCondition&luid='+luid+'&random='+new Date().getTime();
    },
    getAjax_FangDong_CancelPromotionUrl : function (luid) {
        return 'http://'+domain+'/ajax.php?op=Ajax_FangDong_CancelPromotion&luid='+luid+'&random='+new Date().getTime();
    },
    getAjax_FangDong_SelfPromotionUrl : function (luid,avgprice,selfpromotiondiscount,enddate) {
        return 'http://'+domain+'/ajax.php?op=Ajax_FangDong_SelfPromotion&luid='+luid+'&avgPrice='+avgprice+'&discount='+selfpromotiondiscount+'&endDay='+enddate+'&random='+new Date().getTime();
    },
    getAjax_ConvertRedPackageUrl : function (userid,convertvalue) {
        return 'http://'+domain+'/ajax.php?op=Ajax_ConvertRedPackage&userid='+userid+'&convertvalue='+convertvalue+'&_t='+new Date().getTime();
    },
    getAjax_FangDong_TenantAuthentication2GuoZhengTongUrl : function (tenantid,realname,cardno) {
        return "http://"+domain+"/ajax.php?op=Ajax_FangDong_TenantAuthentication2GuoZhengTong&tenantid="+tenantid+"&realname="+realname+"&cardno="+cardno;
    },
    getAjax_ShowNewLetterUrl : function (content) {
        return 'http://'+domain+'/ajax.php?op=Ajax_ShowNewLetter&content='+encodeURIComponent(content);
    },
    getAjax_DelTalkUrl : function (talkid) {
        return 'http://'+domain+'/ajax.php?op=Ajax_DelTalk&delid='+talkid;
    },
    getAjax_SetTenpayInfoUrl : function (tenpayno,tenpayusername,balanceForm) {
        return 'http://'+domain+'/ajax.php?op=Ajax_SetTenpayInfo&tenpayno='+tenpayno+'&tenpayusername='+tenpayusername+'&balanceform='+balanceForm;
    },
    getAjax_CheckAlipayInfoUrl : function (alipayno,alipayusername) {
        return 'http://'+domain+'/ajax.php?op=Ajax_CheckAlipayInfo&alipayno='+alipayno+'&alipayusername='+alipayusername;
    },
    getAjax_SaveAlipayInfoUrl : function (alipayno,alipayusername) {
        return 'http://'+domain+'/ajax.php?op=Ajax_SaveAlipayInfo&alipayno='+alipayno+'&alipayusername='+alipayusername;
    },
    getAjax_SetAlipayInfoUrl : function (alipayno,alipayusername,balanceForm,id) {
        return 'http://'+domain+'/ajax.php?op=Ajax_SetAlipayInfo&alipayno='+alipayno+'&alipayusername='+alipayusername+'&balanceform='+balanceForm+'&id='+id;
    },
    getAjax_SetDefaultUserPaymentUrl : function (id) {
        return 'http://'+domain+'/ajax.php?op=Ajax_SetDefaultUserPayment&id='+id;
    },
    getAjax_SetNationalSecurityInfo : function () {
        return 'http://'+domain+'/ajax.php?op=Ajax_SetNationalSecurityInfo';
    },
    getAjax_FangDong_DelMyRoomsUrl : function (roomId) {
        return 'http://'+domain+'/ajax.php?op=Ajax_FangDong_MyRooms_Del&lodgeunitid='+roomId;
    },
    getAjax_FangDong_MyRoomsSwithStateUrl : function (roomId,switchstr) {
        return 'http://'+domain+'/ajax.php?op=Ajax_FangDong_MyRooms_SwithState&lodgeunitid='+roomId+'&switchval='+switchstr+'&random='+new Date().getTime();
    },
    getAjax_FangDong_MyPartRoomsUrl : function (lodgeId,pageNo) {
        return 'http://'+domain+'/ajax.php?op=AJAX_FangDong_MyPartRooms&parentId='+lodgeId+'&p='+pageNo;
    },
    getAjax_SetLodgeUnitCalendarUrl : function (lodgeUnitId, startDate, endDate, subPrice, bookable, roomnum) {
        return 'http://'+domain+'/ajax.php?op=Ajax_SetLodgeUnitCalendar&lodgeunitid='+lodgeUnitId+'&startdate='+startDate+'&enddate='+endDate+'&price='+subPrice+'&bookable='+bookable+'&housenum='+roomnum+'&random='+new Date().getTime();
    },
    getAjax_GetLodgeUnitPromotionUrl : function (lodgeUnitId, startdate, enddate) {
        return 'http://'+domain+'/ajax.php?op=Ajax_GetLodgeUnitPromotion&lodgeunitid='+lodgeUnitId+'&startdate='+startdate+'&enddate='+enddate;
    },
    getAjax_GetLodgeUnitCalendarUrl : function (lodgeUnitId, startdate, enddate, vstartdate) {
        return 'http://'+domain+'/ajax.php?op=Ajax_GetLodgeUnitCalendar&lodgeunitid='+lodgeUnitId+'&startdate='+startdate+'&enddate='+enddate+'&editable=true&_vstartdate='+vstartdate+'&_t='+new Date().getTime();
    },
    getAjax_GetLodgeUnitCalendar : function (lodgeUnitId, startdate, enddate,calendarCode) {
        return 'http://'+domain+'/ajax.php?op=Ajax_GetLodgeUnitCalendar&lodgeunitid='+lodgeUnitId+'&startdate='+startdate+'&enddate='+enddate+'&calendarCode='+calendarCode+'&_t='+new Date().getTime();
    },
    getAjax_CheckCalendarVerifyCodeUrl : function(luId,verifyCode){
        return 'http://'+domain+'/ajax.php?op=Ajax_CheckCalendarVerifyCode&luid='+luId+'&calendarCode='+verifyCode;
    },
    getAjax_SetLodgeUnitDayPriceUrl : function (lodgeUnitId, price) {
        return 'http://'+domain+'/ajax.php?op=Ajax_SetLodgeUnitDayPrice&lodgeunitid='+lodgeUnitId+'&price='+price+"&_t="+new Date().getTime();
    },
    getAjax_SetLodgeUnitWeekPriceUrl : function (lodgeUnitId, monValue,tueValue,wedValue,thuValue,friValue,satValue,sunValue,startDate,endDate) {
        return "http://"+domain+"/ajax.php?op=Ajax_SetLodgeUnitWeekPrice&lodgeunitid="+lodgeUnitId+"&mon="+monValue+"&tue="+tueValue+"&wed="+wedValue+"&thu="+thuValue+"&fri="+friValue+"&sat="+satValue+"&sun="+sunValue+"&startdate="+startDate+"&enddate="+endDate+"&_t="+new Date().getTime();
    },
    getAjax_FangDong_WeekMonthPromotionUrl : function (lodgeUnitId, discountPerWeek,discountPerMonth) {
        return "http://"+domain+"/ajax.php?op=Ajax_FangDong_WeekMonthPromotion&lodgeunitid="+lodgeUnitId+"&discountperweek="+discountPerWeek+"&discountpermonth="+discountPerMonth+"&_t="+new Date().getTime();
    },
    getAjax_SetLodgeUnitDateIntervalPriceUrl : function (lodgeUnitId, price) {
        return "http://"+domain+"/ajax.php?op=Ajax_SetLodgeUnitDateIntervalPrice&lodgeunitid="+lodgeUnitId+"&price="+price+"&_t="+new Date().getTime();
    },
    getAjax_GetLodgeUnitPromotionUrl: function (lodgeUnitId, startdate, enddate) {
        return 'http://'+domain+'/ajax.php?op=Ajax_GetLodgeUnitPromotion&lodgeunitid='+lodgeUnitId+'&startdate='+startdate + '&enddate='+enddate;
    },
    getAjax_FangDong_EditOrderPriceUrl: function () {
        return "http://"+domain+"/ajax.php?op=Ajax_FangDong_EditOrderPrice";
    },
    getAjax_Pub_GetStepPreviewUrl: function (step,houseId,roomId) {
        return "http://"+domain+"/ajax.php?op=Ajax_Pub_GetStep"+step+"_Preview&houseId="+houseId+"&roomId="+roomId+"&_t="+new Date().getTime();
    },
    getAjax_Pub_GetStepEditUrl: function (step,houseId,roomId) {
        return "http://"+domain+"/ajax.php?op=Ajax_Pub_GetStep"+step+"&houseId="+houseId+"&roomId="+roomId+"&_t="+new Date().getTime();
    },
    getAjax_FangKe_BookOrder_RefundSubmitUrl : function (bookOrderId, cancelBookOrderType, cancelBookOrderReason) {
        return 'http://'+domain+'/ajax.php?op=Ajax_FangKe_BookOrder_RefundSubmit&bookOrderId='+bookOrderId+'&cancelBookOrderType='+cancelBookOrderType+'&cancelBookOrderReason=' + encodeURIComponent(cancelBookOrderReason);
    },
    getAjax_Pub_GetCityJson : function (province_id) {
        return 'http://'+domain+'/ajax.php?op=Ajax_getCityJson&provinceid='+province_id+'&_t=' + new Date().getTime();
    },
    getAjax_Pub_GetDistrictJson : function (city_id) {
        return 'http://'+domain+'/ajax.php?op=Ajax_getDistrictJson&cityid='+city_id+'&_t=' + new Date().getTime();
    },
    getAjax_Pub_GetStreetJson : function (district_id) {
        return 'http://'+domain+'/ajax.php?op=Ajax_getLocaltion&districtid='+district_id+'&_t=' + new Date().getTime();
    },
    getAjax_Pub_CheckAlipayInfo : function (alipayno,alipayusername) {
        return 'http://'+domain+'/ajax.php?op=Ajax_CheckAlipayInfo&alipayno='+alipayno+'&alipayusername='+encodeURIComponent(alipayusername);
    },
    getAjax_Pub_SaveAlipayInfo : function (alipayno,alipayusername) {
        return 'http://'+domain+'/ajax.php?op=Ajax_SaveAlipayInfo&alipayno='+alipayno+'&alipayusername='+encodeURIComponent(alipayusername);
    }, 
    getAjax_Pub_SetAlipayInfo : function (alipayno,alipayusername,balanceForm) {
        return 'http://'+domain+'/ajax.php?op=Ajax_SetAlipayInfo';
        //return 'http://'+domain+'/ajax.php?op=Ajax_SetAlipayInfo&alipayno='+alipayno+'&alipayusername='+alipayusername+'&alipaybalanceform='+balanceForm;
    },
    getAjax_Pub_PreBankPayMent_Submit : function (bankname,bankprovice,bankcity,bankaccountid,bankbranchname,pubpri,bankbranchtex,bankaccountname) {
        return 'http://'+domain+'/ajax.php?op=Ajax_PUB_PreBanckPayMent_Submit&bankname='+bankname+'&bankprovice='+bankprovice+'&bankcity='+bankcity+'&bankaccountid='+bankaccountid+'&bankbranchname='+bankbranchname+'&pubpri='+pubpri+'&bankbranchtext='+bankbranchtex+'&bankaccountname='+bankaccountname;
    },
    getAjax_Pub_Set_SelfPromotion : function (luid) {
        return 'http://'+domain+'/ajax.php?op=Ajax_Pub_Set_SelfPromotion&luid='+luid;
    },
    getAjax_Pub_CutImage : function (url,width,height) {
        return 'http://'+domain+'/ajax.php?op=Ajax_CutImage&key='+url+'&_w='+width+'&_h='+height;
    },
    getAjax_Pub_UploadCutAfterIamge : function (key,value) {
        return 'http://'+domain+'/ajax.php?op=Ajax_uploadCutAfterImage&key='+key+'&value='+value;
    },
    getAjax_Pub_PreGetUserHeadImg : function () {
        return 'http://'+domain+'/ajax.php?op=Ajax_PUB_PreGetUserHeadImg';
    },
    getPub_Step1_SubmitSave : function(){
        return 'http://'+domain+'/ajax.php?op=Ajax_HouseDetail_Submit';
    },
    getPub_Step1_RoomBase_SubmitSave : function(){
        return 'http://'+domain+'/ajax.php?op=Ajax_RoomBase_Submit';
    },
    getPub_Step2_SubmitSave : function(){
        return 'http://'+domain+'/ajax.php?op=Ajax_RoomDetail_Submit';
    },
    getPub_Step3_SubmitSave : function(){
        return 'http://'+domain+'/ajax.php?op=Ajax_RoomFacilities_Submit';
    },
    getPub_Step4_SubmitSave : function(){
        return 'http://'+domain+'/ajax.php?op=Ajax_RoomPicture_Submit';
    },
    getPub_Step5_SubmitSave : function(){
        return 'http://'+domain+'/ajax.php?op=Ajax_RoomPrice_SubmitSave';
    },
    getAjax_RoomProcessPass : function(roomId){
        return 'http://'+domain+'/ajax.php?op=Ajax_RoomProcessPass&roomId='+roomId;
    },
    getPub_HouseDetail : function(roomId){
        return 'http://'+domain+'/ajax.php?op=Ajax_Pub_GetStep1map&roomId='+roomId;
    },
    getPub_PreviewHouseDetail : function(roomId){
        return 'http://'+domain+'/ajax.php?op=Ajax_Pub_GetStep1map_Preview&roomId='+roomId;
    },
    getPub_PreviewHouseRoomDetail : function(roomId){
        return 'http://'+domain+'/ajax.php?op=Ajax_Pub_PreviewHouseRoomDetail&roomId='+roomId;
    },
    getPub_Preview_HouseRoomDetail : function(roomId){
        return 'http://'+domain+'/ajax.php?op=Ajax_Pub_Preview_HouseRoomDetail&roomId='+roomId;
    },
    getPub_PreviewDetail : function(roomId){
        return 'http://'+domain+'/ajax.php?op=Ajax_Pub_PreviewDetail&roomId='+roomId;
    },
    getPub_Preview_RoomDetail : function(roomId){
        return 'http://'+domain+'/ajax.php?op=Ajax_Pub_Preview_RoomDetail&roomId='+roomId;
    },
    getPub_PreviewFacilities : function(roomId){
        return 'http://'+domain+'/ajax.php?op=Ajax_Pub_PreviewFacilities&roomId='+roomId;
    },
    getPub_Preview_RoomFacilities : function(roomId){
        return 'http://'+domain+'/ajax.php?op=Ajax_Pub_Preview_RoomFacilities&roomId='+roomId;
    },
    getPub_PreviewPicture : function(roomId){
        return 'http://'+domain+'/ajax.php?op=Ajax_Pub_PreviewPicture&roomId='+roomId;
    },
    getPub_Preview_RoomPicture : function(roomId){
        return 'http://'+domain+'/ajax.php?op=Ajax_Pub_Preview_RoomPicture&roomId='+roomId;
    },
    getPub_PreviewPrice : function(roomId){
        return 'http://'+domain+'/ajax.php?op=Ajax_Pub_PreviewPrice&roomId='+roomId+'&room_type=2';
    },
    getPub_Preview_Price : function(roomId){
        return 'http://'+domain+'/ajax.php?op=Ajax_Pub_Preview_RoomPrice&roomId='+roomId;
    },
    getPub_PreviewPriceQequest : function(roomId){
        return 'http://'+domain+'/ajax.php?op=Ajax_Pub_PreviewPriceQequest&roomId='+roomId+'&room_type=3';
    },
    getPub_Preview_PriceQequest : function(roomId){
        return 'http://'+domain+'/ajax.php?op=Ajax_Pub_Preview_RoomPriceQequest&roomId='+roomId;
    },
    getPub_Preview_Success : function(){
        return 'http://'+domain+'/ajax.php?op=Ajax_Pub_Preview_Success';
    },
    getPub_LodgeUnitSite : function(houseId){
        return 'http://'+domain+'/ajax.php?op=Ajax_Pub_GetLodgeUnitSite&houseId='+houseId+'&rand='+Math.random();
    },
    getPub_LodgeUnitSite_Save : function(houseId,provinceId,cityId,districtId,inputAddress,latlng,doorNumber){
        return 'http://'+domain+'/ajax.php?op=Ajax_Pub_GetLodgeUnitSite_Save&houseId='+houseId+'&provinceId='+provinceId+'&cityId='+cityId+'&districtId='+districtId+'&inputAddress='+inputAddress+'&latlng='+latlng+'&doorNumber='+doorNumber+'&rand='+Math.random();
    },
    getPub_EditAddress : function(){
        return 'http://'+domain+'/ajax.php?op=Ajax_Pub_EditAddress';
    },
    getFront_Map_GetMapData : function () {
        return 'http://'+domain+'/ajax.php?op=Ajax_GetMapData';
    },
    getFront_Map_GetSubway4Map : function () {
        return 'http://'+domain+'/ajax.php?op=Ajax_GetSubway4Map';
    },
    getFront_Map_CheckSearchCondition : function () {
        return 'http://'+domain+'/ajax.php?op=Ajax_CheckSearchCondition';
    },
    getAjax_Map_GetLandMarkSuggestion : function () {
        return 'http://'+domain+'/ajax.php?op=Ajax_getLandMarkSuggestion';
    },
    getAjax_FangDong_SetAutoCheck : function (isAutoCheck) {
        return 'http://'+domain+'/ajax.php?op=Ajax_SetAutoCheck&isAutoCheck=' + isAutoCheck;
    },
    getAjax_Front_GetCancelRule : function (luid,roomNum,startDate,endDate) {
        return 'http://'+domain+'/ajax.php?op=AJAX_GetCancelRule&luid='+luid+'&roomNum='+roomNum+'&startdate='+startDate+'&enddate='+endDate+'&rand='+new Date().getTime();
    },
    getAjax_Front_GetBookAbleRoomNum : function (lodgeId,startDate,endDate) {
        return 'http://'+domain+'/ajax.php?op=Ajax_GetBookAbleRoomNum&lodgeunitid='+lodgeId+'&startdate='+startDate+'&enddate='+endDate;
    },
    getAjax_Front_GetRoomBookAble : function (lodgeId,sameRoomNum,startDate,endDate,bookOrderId,version) {
        return 'http://'+domain+'/ajax.php?op=Ajax_GetRoomBookAble&lodgeId='+lodgeId+'&sameRoomNum='+sameRoomNum+'&startdate='+startDate+'&enddate='+endDate+'&bookorderid='+bookOrderId+'&version='+version+'&rand='+new Date().getTime();
    },
    getAjax_Front_GetTotalPrice4BookOrder : function (lodgeId,sameRoomNum,startDate,endDate) {
        return 'http://'+domain+'/ajax.php?op=Ajax_GetTotalPrice4BookOrder&lodgeId='+lodgeId+'&sameRoomNum='+sameRoomNum+'&startdate='+startDate+'&enddate='+endDate+'&rand='+Math.floor(Math.random()*10000);
    },
    getAjax_Front_PicCheckCodeVerify : function (checkcode,phone) {
        return 'http://'+domain+'/ajax.php?op=AJAX_PicCheckCodeVerify&checkcode='+checkcode+'&phone='+phone;
    },
    getAjax_Front_UpdateLoginUser : function (name,sex) {
        return 'http://'+domain+'/ajax.php?op=AJAX_UpdateLoginUser&realName='+encodeURIComponent(name)+'&sex='+sex+'&random='+new Date().getTime();
    },
    getAjax_Front_PhoneIsLoginUser : function (mobile,name,sex) {
        return 'http://'+domain+'/ajax.php?op=AJAX_PhoneIsLoginUser&mobile='+mobile+'&realName='+encodeURIComponent(name)+'&sex='+sex+'&random='+new Date().getTime();
    },
    getAjax_Front_CollegeStudentShare : function (status,image,state,objId,objType,friendName,phone,phonecode,email) {
        return 'http://'+domain+'/ajax.php?op=SendCollegeStudentShare&status='+status+'&image='+image+'&state='+state+'&objId='+objId+'&objType='+objType+'&friendName='+friendName+"&phone="+phone+"&phonecode="+phonecode+"&email="+email;
    },
    getAjax_Front_PhoneIsNotExist_PhoneIsLoginUser : function (value) {
        return 'http://'+domain+'/ajax.php?op=AJAX_PhoneIsNotExist_PhoneIsLoginUser&phone='+value+'&rand='+new Date().getTime();
    },
    getAjax_Front_GaoXiao_RoomComment : function (luid) {
        return 'http://'+domain+'/ajax.php?op=Ajax_GetComment4GaoXiao&luid='+luid;
    },
    getWeb_FangDong_CommentUrl : function (filter) {
        return 'http://'+domain+'/xzweb.php?op=FangDong_Comment&filter='+filter;
    },
    getAjax_Front_UserTenantList : function () {
        return 'http://'+domain+'/ajax.php?op=Ajax_FangKe_UserTenant&rand='+new Date().getTime();
    },
    getWeb_FangKe_CommentUrl : function () {
        return 'http://'+domain+'/xzweb.php?op=FangKe_Comment';
    },
    getAjax_UserReal_RenZheng : function () {
        return 'http://'+domain+'/ajax.php?op=Ajax_UserReal_RenZheng';
    },
    getAjax_FD_DelDiaryUrl : function (id) {
        return 'http://'+domain+'/ajax.php?op=Ajax_FD_DelDiary&id='+id;
    },
    getAJAX_FD_RealNameVerifyImgSubUrl : function (data,flag) {
        return 'http://'+domain+'/ajax.php?op=AJAX_FD_RealNameVerifyImgSub&data=' + data +"&flag=" + flag;
    },
    getFangDong_CutSpecialHeadImageFrameUrl : function (imageUrl,markdw,markdh) {
        return 'http://'+domain+'/xzweb.php?op=FangDong_CutSpecialHeadImageFrame&imageUrl=' + imageUrl + '&markdw=' + markdw + '&markdh=' + markdh;
    },
    getAjax_FD_SaveSpecialHeadImage : function (cutx,cuty,cutw,cuth,oriw,orih,oriurl,cutbkgw,cutbkgh,imgIntro) {
        return 'http://'+domain+'/ajax.php?op=Ajax_FD_SaveSpecialHeadImage&cutx=' + cutx +"&cuty=" + cuty + "&cutw=" + cutw + "&cuth=" + cuth + "&oriw=" + oriw + "&orih=" + orih + "&oriurl=" + oriurl + "&cutbkgw=" + cutbkgw + "&cutbkgh=" + cutbkgh + "&imgIntro=" + encodeURIComponent(imgIntro);
    },
    getAjax_FD_DiaryCountUrl : function () {
        return 'http://'+domain+'/ajax.php?op=Ajax_FD_DiaryCount';
    },
    getAjax_FD_Special_OfflineUrl : function (id) {
        return 'http://'+domain+'/ajax.php?op=Ajax_FD_Special_Offline&id=' + id;
    },
    getAjax_FD_Special_OnlineUrl : function (id) {
        return 'http://'+domain+'/ajax.php?op=Ajax_FD_Special_Online&id=' + id;
    },
    getAjax_FD_RealNameVerifySubUrl : function () {
        return 'http://'+domain+'/ajax.php?op=Ajax_FD_RealNameVerifySub';
    },
    getAjax_FD_Diary_ToTopUrl : function (id) {
        return 'http://'+domain+'/ajax.php?op=Ajax_FD_Diary_ToTop&id=' + id;
    },
    getAjax_FD_Diary_ToTop_CountUrl : function (id) {
        return 'http://'+domain+'/ajax.php?op=Ajax_FD_Diary_ToTop_Count';
    },
    getFDDiaryUploadImgUrl : function () {
        return 'http://'+domain+'/imgin4ImageText.php';
    },
    getAjax_GetTenantTagsUrl: function (tenantId) {
        return 'http://'+domain+'/ajax.php?op=Ajax_GetTenantTags&tenantid=' + tenantId;
    },
    getAjax_UpdateSelfIntroUrl: function () {
        return 'http://'+domain+'/ajax.php?op=Ajax_UpdateSelfIntro';
    },
    getAjax_UpdateCheckInInfoDisplayTypeUrl: function () {
        return 'http://'+domain+'/ajax.php?op=Ajax_UpdateCheckInInfoDisplayType';
    },
    getAjax_GetTenantSpecialHeadImgsUrl: function () {
        return 'http://'+domain+'/ajax.php?op=Ajax_GetTenantSpecialHeadImgUrl';
    },
    getAjax_SetTenantSpecialHeadImgUrl: function () {
        return 'http://'+domain+'/ajax.php?op=Ajax_SetTenantSpecialHeadImgUrl';
    },
    getAjax_SearchLodgeUnit : function () {
        return 'http://'+domain+'/ajax.php?op=Ajax_SearchLodgeUnit';
    },
    getWeb_NeedPub: function (cityDomain, startDate, endDate) {
        return 'http://'+domain+'/xzweb.php?op=Front_Need_Pub&startDate='+startDate+'&endDate='+endDate+'&searchcity='+cityDomain;
    },
    getWeb_NeedPubSubmit : function () {
        return 'http://'+domain+'/xzweb.php?op=Front_Need_Pub_Submit';
    },
    getAjax_SetTenantNeedResponseStatus : function () {
        return 'http://'+domain+'/ajax.php?op=Ajax_SetTenantNeedResponseStatus';
    },
    getAjax_SetTenantNeedTimeOutStatus : function () {
        return 'http://'+domain+'/ajax.php?op=Ajax_SetTenantNeedTimeOutStatus';
    },
    getAjax_NeedLodgeunit : function () {
        return 'http://'+domain+'/ajax.php?op=Ajax_getNeedLodgeunit';
    },
    getAjax_NeedLandlord : function () {
        return 'http://'+domain+'/ajax.php?op=Ajax_getNeedLandlord';
    },
    getAjax_ValidNeedCount : function () {
        return 'http://'+domain+'/ajax.php?op=Ajax_ValidNeedCount';
    },
    getFront_Login : function (next) {
        return 'http://'+topLevelDomain+'/login?next='+next;
    },
    getAjax_MakeAgeInfo : function (year,month,day) {
        return 'http://'+domain+'/ajax.php?op=Ajax_MakeAgeInfo&year='+year+'&month='+month+'&day='+day;
    },
    getAjax_CookieNoSubmitUsernameAndEmail : function (username,email) {
        return 'http://'+domain+'/ajax.php?op=Ajax_CookieNoSubmitUsernameAndEmail&username='+username+'&email='+email;
    },
    getAjax_IncreaseGuideVisits : function (guideType) {
        return 'http://'+domain+'/ajax.php?op=Ajax_IncreaseGuideVisits&type='+guideType+'&random='+ new Date().getTime();
    },
    getAjax_FK_OperatorTenantNeedOrderUrl : function () {
        return 'http://'+domain+'/ajax.php?op=Ajax_FK_OperatorTenantNeedOrder';
    },
    getAjax_FD_OperatorTenantNeedOrderUrl : function () {
        return 'http://'+domain+'/ajax.php?op=Ajax_FD_OperatorTenantNeedOrder';
    },
    getAjax_GetTenantNeedOrderPriceDetailUrl : function (id) {
        return 'http://'+domain+'/ajax.php?op=Ajax_GetTenantNeedOrderPriceDetail&tenantNeedOrderId=' + id + "&rand="+new Date().getTime();
    },
    getAJAX_TenantNeedOrderPaySynLockCheckUrl : function () {
        return 'http://'+domain+'/ajax.php?op=AJAX_TenantNeedOrderPaySynLockCheck';
    },
    getAjax_FD_EditTenantNeedOrderPriceUrl: function () {
        return "http://"+domain+"/ajax.php?op=Ajax_FD_EditTenantNeedOrderPrice";
    },
    getAjax_InviteFriendByEmailUrl : function () {
        return 'http://'+domain+'/ajax.php?op=Ajax_InviteFriendByEmail';
    },
    getAjax_GetReferrerLandlordsUrl : function () {
        return 'http://'+domain+'/ajax.php?op=Ajax_GetReferrerLandlords';
    },
    getAjax_doSettleUrl : function () {
        return 'http://'+domain+'/ajax.php?op=Ajax_doSettle';
    },
    getAjax_SetBankPaymentSubUrl : function () {
        return 'http://'+domain+'/ajax.php?op=Ajax_SetBankPaymentSub';
    },
    getAjax_setAlipaymentSubUrl : function () {
        return 'http://'+domain+'/ajax.php?op=Ajax_setAlipaymentSub';
    },
    getAjax_TenantDoSettleUrl : function () {
        return 'http://'+domain+'/ajax.php?op=Ajax_TenantDoSettle';
    },
    getAjax_LandlordDirectsellSettleRecordDataUrl : function () {
        return 'http://'+domain+'/ajax.php?op=Ajax_GetLandlordDirectsellSettleRecordData';
    },
    getAjax_ShareAfter : function (objId,objType,shareContentType,channel) {
        return 'http://'+domain+'/ajax.php?op=Ajax_ShareAfter&objid='+objId+'&objtype='+objType+'&sharecontenttype='+shareContentType+'&channel='+channel;
    },
    getAjax_Exam : function () {
        return 'http://'+domain+'/ajax.php?op=Ajax_do_FangDong_Examination';
    },
    getAjax_Add_Cui : function () {
        return 'http://'+domain+'/ajax.php?op=Ajax_FangDong_Special_Add_Urge';
    },
    getAjax_FangkeInBlackList : function (mobile,cardNo) {
        return 'http://'+domain+'/ajax.php?op=Ajax_FangkeInBlackList&mobile='+mobile+'&cardNo='+cardNo;
    },
    getAjax_BookOrder_EditUserInfo : function (password,nickname) {
        return 'http://'+domain+'/ajax.php?op=Ajax_BookOrder_EditUserInfo&password='+password+'&nickname='+nickname;
    },
    getAjax_jsErrorLogger : function () {
        return 'http://'+domain+'/ajax.php?op=Ajax_JsErrorLogger';
    },
    getAjax_BookOrder_CheckState : function (lodgeId,sameRoomNum,startDate,endDate,bookOrderId,version) {
        return "http://"+domain+"/ajax.php?op=Ajax_BookOrder_CheckState&luid="+lodgeId+"&roomnum="+sameRoomNum+"&startdate="+startDate+"&enddate="+endDate+'&bookOrderId='+bookOrderId+'&version='+version+"&rand="+new Date().getTime();
    },
    getAjax_1yuanAutumnStatus : function () {
        return "http://"+domain+"/ajax.php?op=autumnDeep1yuanInStatus&time="+new Date().getTime();
    },
    getAjax_Add_Zan : function () {
        return 'http://'+domain+'/ajax.php?op=Ajax_Add_Zan';
    },
    getAjax_sendCoupon4AprilFoolDay : function () {
        return 'http://'+domain+'/ajax.php?op=Ajax_sendCoupon4AprilFoolDay';
    },
    getAjax_BookPayIntegralCoupon : function (bookorderid){
       return 'http://'+domain+'/ajax.php?op=Ajax_BookPayIntegralCoupon&bookorderid='+bookorderid;  
    },
    getAjax_CouponInfo: function (couponid){
       return 'http://'+domain+'/ajax.php?op=Ajax_GetCouponInfo&couponid='+couponid;    
    },
    getAjax_BookPayAbleCoupon: function (bookorderid){
       return 'http://'+domain+'/ajax.php?op=Ajax_BookPayAbleCoupon&bookorderid='+bookorderid;    
    },
    getWeb_FangKe_CheckCommentUrl: function (bookorderid){
       return 'http://'+domain+'/ajax.php?op=Ajax_CommitCheck&bookorderid='+bookorderid;    
    },
    getAddBillSubUrl : function(){
        return 'http://'+domain+'/ajax.php?op=Ajax_FK_AddBillSub';
    },
    getUserBillHistoryUrl : function(pageNum){
        return 'http://'+domain+'/ajax.php?op=Ajax_FK_BillHis&p='+pageNum+'&rand='+Math.random();
    },
    getCancelBillUrl : function(id){
        return 'http://'+domain+'/ajax.php?op=Ajax_FK_BillCancel&id='+id;
    },
    getAddBillUrl : function(){
        return 'http://'+domain+'/ajax.php?op=Ajax_FK_AddBill&rand='+Math.random();
    },
    getAjax_drawLottery4NoonBreakUrl : function (district,address){
        return 'http://'+domain+'/ajax.php?op=Ajax_DrawLottery4NoonBreak&district='+district+'&address='+address+'&rand='+Math.random();
    },
    getAjax_getNoonBreakAwardUrl : function (name,mobile,sleepTime){
        if(name && mobile && sleepTime){
            return 'http://'+domain+'/ajax.php?op=Ajax_getNoonBreakAward&name='+encodeURI(name)+'&mobile='+mobile+'&sleepTime='+sleepTime+'&rand='+Math.random();
        } else {
            return 'http://'+domain+'/ajax.php?op=Ajax_getNoonBreakAward&rand='+Math.random();
        }
    },
    getAjax_getAvaliableCarBedUrl : function (){
        return 'http://'+domain+'/ajax.php?op=Ajax_getAvaliableCarBed&rand='+Math.random();
    },
    getAjax_LuckerList4NoonBreakUrl : function (){
        return 'http://'+domain+'/ajax.php?op=Ajax_LuckerList4NoonBreak&rand='+Math.random();
    },
    getAjaxAddFavorite: function (loginUserid,lodgeUnitId){
       return 'http://'+domain+'/ajax.php?op=Ajax_AddFavorite&loginUserid='+loginUserid+'&lodgeUnitId='+lodgeUnitId+'&rand='+new Date().getTime();    
    },
    getAjaxCancelFavorite: function (lodgeUnitId){
       return 'http://'+domain+'/ajax.php?op=Ajax_CancelFavorite&lodgeUnitId='+lodgeUnitId+'&rand='+new Date().getTime();    
    },
    getAjaxGetZhiMaNoCashPledgeList: function (cityId){
       return 'http://'+domain+'/ajax.php?op=Ajax_getZhiMaNoCashPledgeList&cityId='+cityId+'&rand='+new Date().getTime();    
    },
    getAjaxApplyCashPledgeByLandlordUrl : function(bookOrderId,pledge2Landlord,reason){
       return 'http://'+domain+'/ajax.php?op=Ajax_FD_ApplyCashPledge&bookOrderId='+bookOrderId+'&pledge2Landlord='+pledge2Landlord+'&reason='+encodeURIComponent(reason)+'&rand='+new Date().getTime();
    },
    getAjaxCancelCashPledgeByLandlordUrl : function(bookOrderId){
       return 'http://'+domain+'/ajax.php?op=Ajax_FD_CancelCashPledge&bookOrderId='+bookOrderId+'&rand='+new Date().getTime();
    },
    getAjaxApplyServiceByLandlordUrl : function(bookOrderId){
       return 'http://'+domain+'/ajax.php?op=Ajax_FD_ApplyService4CashPledge&bookOrderId='+bookOrderId+'&rand='+new Date().getTime();
    },
    getReturnCashPledgeUrl : function(bookOrderId){
       return 'http://'+domain+'/ajax.php?op=Ajax_FD_ReturnCashPledge&bookOrderId='+bookOrderId+'&rand='+new Date().getTime();
    },
    getAJAX_GetLodgeUnitCalendar : function (luid,startDate,endDate,editable,calendarCode){
        return 'http://'+domain+'/ajax.php?op=AJAX_GetLodgeUnitCalendar&lodgeunitid='+luid+'&startdate='+startDate+'&enddate='+endDate+'&editable='+editable+'&calendarCode='+calendarCode+'&rand='+Math.random();
    },
    getAJAX_ActivitySanyaXiamen : function (){
        return 'http://'+domain+'/yunying.php?op=YunYing_luckyDraw&rand='+Math.random();
    },
    getAJAX_ActivitySanyaXiamenShare : function (){
        return 'http://'+domain+'/yunying.php?op=YunYing_shareLuckyDraw&rand='+Math.random();
    },
    getAJAX_applyCleanService : function (){
        return 'http://'+domain+'/ajax.php?op=Ajax_applyCleanService';
    },
    getAJAX_getMsCoupon : function (){
        return 'http://'+domain+'/ajax.php?op=Ajax_getMsCoupon';
    }

    
};
 
 var xzRegularExpression={a:1,isNum:/^\d{1,}$/,isMobile:/^\d{11}$/,isUsername:/^[\w|\u4E00-\u9FA5|\u3400-\u4DB5|\uE815-\uE864|\u9FA6-\u9FBB]*$/,isChinese:/^[\u4E00-\u9FA5|\u3400-\u4DB5|\uE815-\uE864|\u9FA6-\u9FBB]+$/,simpleMobile:/^\d{11}$/,mobile:/^1((3[0-9])|(4[57])|(5[0-35-9])|(7[36780])|(8[0-9]))\d{8}$/,password:/^[0-9a-zA-Z*!@.\-? : ;|$#%^&()_+=\[\]\\\/{}<>",~`']{0,}$/,numbers:/[1-9][0-9]{4}/,simpleEmail:/^.*?@.+$/,email:/^[a-zA-Z0-9_\.\-]+@[a-zA-Z0-9_\-]+(\.[a-zA-Z0-9_\-]+)+[a-zA-Z]+$/,passport:/^[\d\w]{4,20}$/}; 
 /* Copyright (c) 2006 Brandon Aaron (http://brandonaaron.net)
 * Dual licensed under the MIT (http://www.opensource.org/licenses/mit-license.php) 
 * and GPL (http://www.opensource.org/licenses/gpl-license.php) licenses.
 *
 * $LastChangedDate: 2007-07-11 23:14:51 -0500 (Wed, 11 Jul 2007) $
 * $Rev: 2323 $
 *
 * Version 2.1
 */

(function($){

/**
 * The bgiframe is chainable and applies the iframe hack to get 
 * around zIndex issues in IE6. It will only apply itself in IE 
 * and adds a class to the iframe called 'bgiframe'. The iframe
 * is appeneded as the first child of the matched element(s) 
 * with a tabIndex and zIndex of -1.
 * 
 * By default the plugin will take borders, sized with pixel units,
 * into account. If a different unit is used for the border's width,
 * then you will need to use the top and left settings as explained below.
 *
 * NOTICE: This plugin has been reported to cause perfromance problems
 * when used on elements that change properties (like width, height and
 * opacity) a lot in IE6. Most of these problems have been caused by 
 * the expressions used to calculate the elements width, height and 
 * borders. Some have reported it is due to the opacity filter. All 
 * these settings can be changed if needed as explained below.
 *
 * @example $('div').bgiframe();
 * @before <div><p>Paragraph</p></div>
 * @result <div><iframe class="bgiframe".../><p>Paragraph</p></div>
 *
 * @param Map settings Optional settings to configure the iframe.
 * @option String|Number top The iframe must be offset to the top
 * 		by the width of the top border. This should be a negative 
 *      number representing the border-top-width. If a number is 
 * 		is used here, pixels will be assumed. Otherwise, be sure
 *		to specify a unit. An expression could also be used. 
 * 		By default the value is "auto" which will use an expression 
 * 		to get the border-top-width if it is in pixels.
 * @option String|Number left The iframe must be offset to the left
 * 		by the width of the left border. This should be a negative 
 *      number representing the border-left-width. If a number is 
 * 		is used here, pixels will be assumed. Otherwise, be sure
 *		to specify a unit. An expression could also be used. 
 * 		By default the value is "auto" which will use an expression 
 * 		to get the border-left-width if it is in pixels.
 * @option String|Number width This is the width of the iframe. If
 *		a number is used here, pixels will be assume. Otherwise, be sure
 * 		to specify a unit. An experssion could also be used.
 *		By default the value is "auto" which will use an experssion
 * 		to get the offsetWidth.
 * @option String|Number height This is the height of the iframe. If
 *		a number is used here, pixels will be assume. Otherwise, be sure
 * 		to specify a unit. An experssion could also be used.
 *		By default the value is "auto" which will use an experssion
 * 		to get the offsetHeight.
 * @option Boolean opacity This is a boolean representing whether or not
 * 		to use opacity. If set to true, the opacity of 0 is applied. If
 *		set to false, the opacity filter is not applied. Default: true.
 * @option String src This setting is provided so that one could change 
 *		the src of the iframe to whatever they need.
 *		Default: "javascript:false;"
 *
 * @name bgiframe
 * @type jQuery
 * @cat Plugins/bgiframe
 * @author Brandon Aaron (brandon.aaron@gmail.com || http://brandonaaron.net)
 */
$.fn.bgIframe = $.fn.bgiframe = function(s) {
	// This is only for IE6
	if ( $.browser.msie && /IE 6.0/.test(navigator.userAgent) ) {
		s = $.extend({
			top     : 'auto', // auto == .currentStyle.borderTopWidth
			left    : 'auto', // auto == .currentStyle.borderLeftWidth
			width   : 'auto', // auto == offsetWidth
			height  : 'auto', // auto == offsetHeight
			opacity : true,
			src     : 'javascript:false;'
		}, s || {});
		var prop = function(n){return n&&n.constructor==Number?n+'px':n;},
		    html = '<iframe class="bgiframe"frameborder="0"tabindex="-1"src="'+s.src+'"'+
		               'style="display:block;position:absolute;z-index:-1;'+
			               (s.opacity !== false?'filter:Alpha(Opacity=\'0\');':'')+
					       'top:'+(s.top=='auto'?'expression(((parseInt(this.parentNode.currentStyle.borderTopWidth)||0)*-1)+\'px\')':prop(s.top))+';'+
					       'left:'+(s.left=='auto'?'expression(((parseInt(this.parentNode.currentStyle.borderLeftWidth)||0)*-1)+\'px\')':prop(s.left))+';'+
					       'width:'+(s.width=='auto'?'expression(this.parentNode.offsetWidth+\'px\')':prop(s.width))+';'+
					       'height:'+(s.height=='auto'?'expression(this.parentNode.offsetHeight+\'px\')':prop(s.height))+';'+
					'"/>';
		return this.each(function() {
			if ( $('> iframe.bgiframe', this).length == 0 )
				this.insertBefore( document.createElement(html), this.firstChild );
		});
	}
	return this;
};

})(jQuery);
 
 function blurImageCode(phone)
{
    var checkcode = $('#imagecode').val();
    var flag = true;
    $('#tip_imagecode').html('').hide();
    if (checkcode == '') {
        $('#tip_imagecode').html('请输入验证码').show();
        return false;
    } else if (checkcode.length !=4 ) {
        $('#tip_imagecode').html('验证码不正确').show();
        $('#img_imagecode').attr("src",XZWebUrlWriter.getAjax_GetPicCheckCodeShowUrl());
        return false;
    }
    else {
    $.ajax({
        type:'get',
        url : XZWebUrlWriter.getAjax_Front_PicCheckCodeVerify(checkcode,phone),
        async: false,
        success:function(data){
            var dataObj=eval("("+data+")");
            if (dataObj && dataObj.status=='1') {
                $('#tip_imagecode').html('').hide();
                flag = true;
                return true;
            } else {
                $('#tip_imagecode').html(dataObj.errmsg).show();
                $('#img_imagecode').attr("src",XZWebUrlWriter.getAjax_GetPicCheckCodeShowUrl());
                flag = false;
                return false;
            }
        }
    });
    return flag;
    }
}
function blurImageCodeInfo(phone)
{
    var checkcode = $('#imagecodeInfo').val();
    var flag = true;
    $('#tip_imagecode').html('').hide();
    if (checkcode == '') {
        $('#tip_imagecode').html('请输入验证码').show();
        return false;
    } else if (checkcode.length !=4 ) {
        $('#tip_imagecode').html('验证码不正确').show();
        $('#img_imagecodeInfo').attr("src",XZWebUrlWriter.getAjax_GetPicCheckCodeShowUrl());
        return false;
    }
    else {
    $.ajax({
        type:'get',
        url : XZWebUrlWriter.getAjax_Front_PicCheckCodeVerify(checkcode,phone),
        dataType : 'json',
        async: false,
        success:function(dataObj){
            if (dataObj && dataObj.status=='1') {
                $('#tip_imagecode').html('').hide();
                flag = true;
                return true;
            } else {
                $('#tip_imagecode').html(dataObj.errmsg).show();
                $('#img_imagecodeInfo').attr("src",XZWebUrlWriter.getAjax_GetPicCheckCodeShowUrl());
                flag = false;
                return false;
            }
        }
    });
    return flag;
    }
}

function resetCheckcode(imageID,imagecode) 
{ 
    if(imageID == '' || typeof(imageID)=='undefined')
        imageID='img_imagecode';

    if(imagecode == '' || typeof(imagecode)=='undefined')
        imagecode='imagecode';

    $('#'+imageID).attr("src",XZWebUrlWriter.getAjax_GetPicCheckCodeShowUrl());
    $('#'+imagecode).val('');   
    return false;
}

 
 var _keywordValue = '';
var districtSearchKey = 'E';

function getFullDate(date){
    var _FullDate = date;
    if(date < 10)
        _FullDate = 0 + String(date);

    return _FullDate;
}
function searchCity(pageType)
{
   if($('#actionname').val()=='Front_Search'){
     var searchCity = $('#searchcityd').attr("value");
   }else{
     var searchCity = $('#searchcity').attr("value");
   }
   
    var cityDomain = $('#citydomain').attr("value");
    var suggestion_cityDomain = $('#suggestion_citydomain').attr("value");
    if(suggestion_cityDomain != "")
        cityDomain = suggestion_cityDomain;
    var searchKey = $('#searchkey').val();//api name
    var searchPutKey = $('#keyword').val();//user set word
    var searchLid = $('#landmarkid').val();
    var landmarktype = $('#landmarktype').val();
    var defaulturl = $('#defaulturl').val();
    var isOpenBlank = $('#isopenblank').val();
    var jumpUrl = '';
    if(searchKey == _keywordValue)
        searchKey = '';
    if(searchPutKey == _keywordValue || searchPutKey=='输入地点...')
        searchPutKey = '';

    if(!searchCity || searchCity =='请选择城市或目的地')
    {
        $('#tip_searchcity').html("请选择城市或目的地");
        $('#tip_searchcity').show();
        return ;
    }
    searchCity = encodeURI(searchCity); 
    var startDate = $('#startdate').attr('value');
    var endDate = $('#enddate').attr('value');

    var abtest_ABTest4SearchDate = getCookie('abtest_ABTest4SearchDate');
    if (abtest_ABTest4SearchDate == 'b')
    {
        if((startDate == '' || startDate == '请选择入住日期') && (endDate == ''|| endDate == '请选择退房日期'))
        {
            startDate = '';
            endDate = '';
            deleteCookie('startDate','/','.'+topLevelDomain);
            deleteCookie('endDate','/','.'+topLevelDomain);
        }
        else if(startDate == '请选择入住日期' || startDate.length < 1 )
        {
            $('#startdate').css('color','red').fadeOut('slow').fadeIn("slow").fadeOut("slow").fadeIn("slow",function(){
                    $(this).css('color','')
                    });
            return ;
        }
        else if(endDate == '请选择退房日期' || endDate.length < 1)
        { 
            $('#enddate').css('color','red').fadeOut('slow').fadeIn("slow").fadeOut("slow").fadeIn("slow",function(){
                    $(this).css('color','')
                    });
            return ;
        }
    }
    else
    {
        if((startDate == '请选择入住日期' && endDate == '请选择退房日期') || (startDate.length < 1 && endDate.length < 1))
        {
            $('#startdate').css('color','red').fadeOut('slow').fadeIn("slow").fadeOut("slow").fadeIn("slow",function(){
                    $(this).css('color','')
                    });
            $('#enddate').css('color','red').fadeOut('slow').fadeIn("slow").fadeOut("slow").fadeIn("slow",function(){
                    $(this).css('color','')
                    });
            $('#calendar_btn_s').click();
            return ;
        }
        else if(startDate == '请选择入住日期' || startDate.length < 1 )
        {
            $('#startdate').css('color','red').fadeOut('slow').fadeIn("slow").fadeOut("slow").fadeIn("slow",function(){
                    $(this).css('color','')
                    });
            return ;
        }
        else if(endDate == '请选择退房日期' || endDate.length < 1)
        { 
            $('#enddate').css('color','red').fadeOut('slow').fadeIn("slow").fadeOut("slow").fadeIn("slow",function(){
                    $(this).css('color','')
                    });
            return ;
        }
    }
    var   type="^[0-9]*[1-9][0-9]*$";
    var   re   =   new   RegExp(type);


    if(searchCity.match(re) != null)
    {
        $.ajax({
            type:"get",
            url:XZWebUrlWriter.getAjax_CheckLodgeUnitUrl(searchCity),
            async : false,
            success:function(data){
               if(data)
               {
                   var obj = eval("("+data+")");
                    if(obj['error'] == '1')
                   {
                        $('#tip_searchcity').html(obj['errormsg']);
                        $('#tip_searchcity').show();
                        return;
                   }else
                    {
                        if(isOpenBlank == '1')
                        {
                            openNewPage(obj['detailurl']);
                        }else
                        {
                            location.href = obj['detailurl'];
                        }
                        return;
                    }
               }
                
            }
            
        })
    }else
   {
    if(pageType == 'search')
        cityDomain = '';
    $.ajax({
        type: "get",
        url:XZWebUrlWriter.getAjax_CheckSearchConditionUrl(searchCity,cityDomain,startDate,endDate),
        async : false,
        success: function(data) {
            if(data)
            {
                var dataObj = eval("("+data+")");
                if(dataObj['error'] == '1')
                {
                    if(dataObj['cityInfo'])
                {
                    $('#tip_searchcity').html(dataObj['cityInfo']);
                    $('#tip_searchcity').show();
                };
                if(dataObj['dateInfo'])
                {       
                    $('#tip_enddate').html(dataObj['dateInfo']);
                    $('#tip_enddate').show();
                };
                //setTimeout(function() { $('#tip_searchcity').hide() }, 4000);
                 setTimeout(function() { $('#tip_enddate').hide() }, 4010);
                 if($('#actionname').val()=='Front_Search'){
                        alert('对不起，没有找到相应的结果');
                        location.reload();
                      }
                }
                else
                {
                    var city = dataObj['city'] ;
                    var paramArray = new Array();
                    var paramStr = '';
                    if(startDate != '')
                    {
                        paramArray.push('startDate='+startDate);
                    }
                    if(endDate != '')
                    {
                        paramArray.push('endDate='+endDate);
                    }
                    if(searchPutKey != '' && searchPutKey != null && landmarktype != districtSearchKey)
                    {
                        paramArray.push('putkey='+encodeURIComponent(ignoreSpaces(searchPutKey)));
                    }
                    else if(searchKey != '' && searchKey != null && landmarktype != districtSearchKey)
                    {
                        paramArray.push('putkey='+encodeURIComponent(ignoreSpaces(searchKey)));
                    }

                    
                    paramStr = paramArray.join('&');
                    if(landmarktype == districtSearchKey)
                    {
                        defaulturl = searchLid+"-duanzufang-8/";
                        if(paramStr)
                            defaulturl += "?";
                        jumpUrl = "http://" + city + "." + topLevelDomain + "/" + defaulturl+paramStr;
                        if(isOpenBlank == '1')
                        {
                            openNewPage(jumpUrl);
                        }else
                        {
                            location.href = jumpUrl;
                        }
                        return false;
                    }
                    if(defaulturl)
                    {
                        defaulturl += "-duanzufang-20/";
                        if(paramStr)
                            defaulturl += "?";
                        jumpUrl = "http://" + city + "." + topLevelDomain + "/" + defaulturl+paramStr;
                        if(isOpenBlank == '1')
                        {
                            openNewPage(jumpUrl);
                        }else
                        {
                            location.href = jumpUrl;
                        }
                        return false;
                    }

                    if(startDate != '' || endDate != '')
                        paramStr = paramArray.join('&');
                    if(paramStr !='')
                    {
                        if(searchLid)
                        {
                            if(searchKey)
                                var paramVal = encodeURIComponent(searchKey) + "_" + searchLid + "S-duanzufang-20/"; 
                            else if(searchPutKey)
                                var paramVal = encodeURIComponent(ignoreSpaces(searchPutKey)) + "_" + searchLid + "M-duanzufang-20/"; 

                            jumpUrl = "http://"+city+'.'+topLevelDomain+"/"+paramVal+'?'+paramStr;
;
                            if(isOpenBlank == '1')
                            {
                                openNewPage(jumpUrl);
                            }else
                            {
                                location.href = jumpUrl;
                            }
                        }
                        else
                        {
                            var paramVal = "";
                            if(searchPutKey)
                            {
                                paramVal = encodeURIComponent(ignoreSpaces(searchPutKey)) + "_M-duanzufang-20/"; 
                            }
                            jumpUrl = "http://"+city+'.'+topLevelDomain+"/"+paramVal+'?'+paramStr;

                            if(isOpenBlank == '1')
                            {
                                openNewPage(jumpUrl);
                            }else
                            {
                                location.href = jumpUrl;
                            }
                        }
                    }
                    else 
                    {
                        if(!searchLid && searchPutKey)
                        {
                            var paramVal = encodeURIComponent(ignoreSpaces(searchPutKey)) + "_M-duanzufang-20/"; 
                            jumpUrl = "http://"+city+'.'+topLevelDomain+"/"+paramVal+'?'+paramStr;
                            if(isOpenBlank == '1')
                            {
                                openNewPage(jumpUrl);
                            }else
                            {
                                location.href = jumpUrl;
                            }
                        }
                        else if(searchLid && (searchPutKey || searchKey))
                        {
                            if(searchKey)
                                var paramVal = encodeURIComponent(ignoreSpaces(searchKey)) + "_" + searchLid + "S-duanzufang-20/"; 
                            if(searchPutKey)
                                var paramVal = encodeURIComponent(ignoreSpaces(searchPutKey)) + "_" + searchLid + "M-duanzufang-20/"; 
                            jumpUrl = "http://"+city+'.'+topLevelDomain+"/"+paramVal+'?'+paramStr;
                            if(isOpenBlank == '1')
                            {
                                openNewPage(jumpUrl);
                            }else
                            {
                                location.href = jumpUrl;
                            }
                        }
                        else
                        {
                            jumpUrl = "http://"+city+'.'+topLevelDomain+"/";
                            if(isOpenBlank == '1')
                            {
                                openNewPage(jumpUrl);
                            }else
                            {
                                location.href = jumpUrl;
                            }

                        }
                    }
                }
            }
        }
    });
   }
}

function debug(str){
    if(window.console){
        console.debug(str);
        return;
    }

    var d = $('#debug');
    if(d.length == 0){
        $(document.body).append('<div id="debug"></div>');
        d = $('#debug');
    }

    var item = $('<div></div>').text(str);
    d.append(item);
}
//compare date
function compareDate(date){
    var newDate = date.split("-");
    var dateY = newDate[0];
    var dateM = newDate[1];
    var dateD = newDate[2];
    return Date.parse(dateM + "/" + dateD + "/" + dateY);
}

function checkBankCardNo(bankno){
    var lastNum=bankno.substr(bankno.length-1,1);

    var first15Num=bankno.substr(0,bankno.length-1);
    var newArr=new Array();
    for(var i=first15Num.length-1;i>-1;i--){   
        newArr.push(first15Num.substr(i,1));
    }
    var arrJiShu=new Array();  
    var arrJiShu2=new Array(); 

    var arrOuShu=new Array();  
    for(var j=0;j<newArr.length;j++){
        if((j+1)%2==1){
            if(parseInt(newArr[j])*2<9)
                arrJiShu.push(parseInt(newArr[j])*2);
            else
                arrJiShu2.push(parseInt(newArr[j])*2);
        }
        else 
            arrOuShu.push(newArr[j]);
    }

    var jishu_child1=new Array();
    var jishu_child2=new Array();
    for(var h=0;h<arrJiShu2.length;h++){
        jishu_child1.push(parseInt(arrJiShu2[h])%10);
        jishu_child2.push(parseInt(arrJiShu2[h])/10);
    }       

    var sumJiShu=0; 
    var sumOuShu=0; 
    var sumJiShuChild1=0; 
    var sumJiShuChild2=0; 
    var sumTotal=0;
    for(var m=0;m<arrJiShu.length;m++){
        sumJiShu=sumJiShu+parseInt(arrJiShu[m]);
    }

    for(var n=0;n<arrOuShu.length;n++){
        sumOuShu=sumOuShu+parseInt(arrOuShu[n]);
    }

    for(var p=0;p<jishu_child1.length;p++){
        sumJiShuChild1=sumJiShuChild1+parseInt(jishu_child1[p]);
        sumJiShuChild2=sumJiShuChild2+parseInt(jishu_child2[p]);
    }     
    //计算总和
    sumTotal=parseInt(sumJiShu)+parseInt(sumOuShu)+parseInt(sumJiShuChild1)+parseInt(sumJiShuChild2);

    //计算Luhm值
    var k= parseInt(sumTotal)%10==0?10:parseInt(sumTotal)%10;       
    var luhm= 10-k;

    if(lastNum==luhm){
        return true;
    }
    else{
        return false;
    }       
}
function is_array(test)  
{  
    if(typeof test == 'object' && typeof test.sort == 'function' && typeof test.length == 'number')  
    {  
        return true;  
    }  
    else  
    {  
        return false;  
    }  
}
function gaClickSta(strEvent)
{
}
function ignoreSpaces(string) {
    var temp = "";
    string = '' + string;
    splitstring = string.split(" ");
    for(i = 0; i < splitstring.length; i++)
        temp += splitstring[i];
    return temp;
}
function  checkIAgree(){
    $("#tip_affirm").css("display","none");   
}

function check_all(obj){$("input." + obj).each(function(i){this.checked = true;});}
function check_no(obj){$("input." + obj).each(function(i){this.checked = false;});}
function check_fan(obj){$("input." + obj).each(function(i){this.checked = this.checked == true ? false : true;});}
function check_str(obj){str = new String();$("input." + obj).each(function(i){str = this.checked == true ? str + this.value + "," : str;});str = str.substr("0", str.lastIndexOf(","));return str;}

function keyFocus(iptName,defValue)
{

    var _text = $("#"+iptName).val();

    if(_text == defValue)
    {
        $("#"+iptName).attr("value", '');
        $("#"+iptName).attr("style",'color:#555');
    }   
}
function keyBlur(iptName,defValue)
{   
    var _text = $("#"+iptName).val();  
    if(_text == '')
    {
        $("#"+iptName).attr("value",defValue);
        $("#"+iptName).attr("style",'color:#999');
    }
}

function getCookieVal(offset) {
    var endstr = document.cookie.indexOf(";", offset);
    if(endstr == -1) {
        endstr = document.cookie.length;
    }
    return document.cookie.substring(offset, endstr);
}
function getCookie(name) {
    var arg = name + "=";
    var alen = arg.length;
    var clen = document.cookie.length;
    var i = 0;
    var j = 0;
    while(i < clen) {
        j = i + alen;
        if(document.cookie.substring(i, j) == arg){
            return getCookieVal(j);
        }
        i = document.cookie.indexOf(" ", i) + 1;
        if(i === 0){
            break;
        }
    }
    return '';
}
function deleteCookie(name,path,domain) {
    var exp = new Date();
    var cval = getCookie(name);
    exp.setTime(exp.getTime() - 1);
    document.cookie = name + "=" + cval + "; expires=" + exp.toGMTString() +
        ((domain === null) ? "" : ("; domain=" + domain)) +
        ((path === null) ? "" : ("; path=" + path)) ;
}

function deleteCookie4Search(name,path,domain) {
    var exp = new Date();
    var cval = getCookie(name);
    exp.setTime(exp.getTime() - 1);
    document.cookie = name + "=" + cval + "; expires=" + exp.toGMTString() +
        ((domain === null) ? "" : ("; domain=" + domain)) +
        ((path === null) ? "" : ("; path=" + path)) ;
}

function setCookie(name, value) {
    var argv = setCookie.arguments;
    var argc = setCookie.arguments.length;
    var exp = (argc > 2) ? argv[2] : 90;
    var path = (argc > 3) ? argv[3] : null;
    var domain = (argc > 4) ? argv[4] : null;
    var secure = (argc > 5) ? argv[5] : false;
    var expires = new Date();
    deleteCookie(name,path,domain);
    if(exp < 365) {
        expires.setTime(expires.getTime() + (exp*24*60*60*1000));
    }else{
        expires.setTime(expires.getTime() + (exp));
    }
    document.cookie = name + "=" + value +
        "; expires=" + expires.toGMTString() +
        ((domain === null) ? "" : ("; domain=" + domain)) +
        ((path === null) ? "" : ("; path=" + path)) +
        ((secure === true) ? "; secure" : "");
}
function orderDetail(lodgeId,sameRoomNum,startDate,endDate)
{
       content = '';
        $.ajax({
            type: "get",
            url: XZWebUrlWriter.getAjax_GetBookLodgeUnitDetailUrl(lodgeId,sameRoomNum,startDate,endDate),
            async:false,
            success: function(data) {
                content = data;
            }
        });
    $('#lodgeUnitPriceDetail').dialog({
        width : 750,
        //height:520,
        resizable: false,
        modal:false,
        position: "center"
    });
    if ($.browser.msie && ($.browser.version == "6.0") && !$.support.style) 
    { 
        $('#lodgeUnitPriceDetail').dialog({
            bgiframe: true,
            height:520
        });
    } 

    $('#lodgeUnitPriceDetail').html(content);
    $('#lodgeUnitPriceDetail').dialog("open");
    $('.ui-dialog-titlebar').hide();
    $('.ui-widget-content').css('border','0px');
}

function priceOrder()
{
    var bookorderid = $("#bookOrderId").val();
    orderPriceDetail(bookorderid);
}

function orderPriceDetail(bookOrderId,url)
{
    var url = (typeof url == "undefined") ? XZWebUrlWriter.getAjax_GetOrderPriceDetailUrl(bookOrderId) : url;
     content = '';
        $.ajax({
            type: "get",
            url: url, 
            async:false,
            success: function(data) {
                content = data;
            }
        });
    $('#lodgeUnitPriceDetail').dialog({
        width : 750,
        resizable: true,
        modal:false,
        position: "center"
    });
    if ($.browser.msie && ($.browser.version == "6.0") && !$.support.style) 
    { 
        $('#lodgeUnitPriceDetail').dialog({
            height:520
        });
    }
    $('#lodgeUnitPriceDetail').html(content);
    $('#lodgeUnitPriceDetail').dialog("open");
    $('.ui-dialog-titlebar').hide();
    $('.ui-widget-content').css('border','0px');
}

function dateTransform(date)
{
    var newDate = new Date(date);
    var dateY = newDate.getFullYear();
    var dateM = getFullDate(newDate.getMonth()+1);
    var dateD = getFullDate(newDate.getDate());
    return dateY + "-" + dateM + "-" + dateD;
}
function getSubCHString(value,len)
{
    if(value.length <= len)
        return value;
    var strlen = 0; 
    var strnum = 0;
    var str = "";
    for(var i = 0;i < value.length;i++)
    {
        strlen ++;
        if(value.charCodeAt(i) <= 128)
        {
            strnum++;
        }
        if(strnum > len)
        {
            strnum = len;
        }
        str += value.charAt(i);
        if(strlen >= (len + strnum)){ 
            return str + '...';
        }
    }
    return str + '...';
}
$(function(){
    window.setTimeout(getLayzeLoadData,1000);
})
function getLayzeLoadData()
{
    var layzeloadObj = $('layzeload');
    if(layzeloadObj.length<0)
    {
        return false;
    }
    layzeloadObj.each(function(){
        var turl = encodeURIComponent($(this).attr('turl'));
        var memkey = $(this).attr('memkey');
        var memtimeout = $(this).attr('memtimeout');
        var jsexecafterload = $(this).attr('jsexecafterload');
        var id = 'load_'+$(this).attr('key');

        $.ajax({
            type:"get",
            url: XZWebUrlWriter.getAjax_GetLazyInfoUrl(memkey,memtimeout,turl), 
            success:function(data){
                $("#"+id).html(data);
                if (jsexecafterload)
                    eval(jsexecafterload);
            }
        })
    })
    return false;
}
function isIe6()
{
    if($.browser.msie && $.browser.version=="6.0")
    {
        return true;
    }
    return false;
}
function changeDate(startDate,days) 
{
    // 参数表示在当前日期下要增加的天数
    var now = new Date(startDate.replace(/-/g, "/"));
    // + 1 代表日期加，- 1代表日期减
    now.setDate((now.getDate() + 1 * days));
    var year = now.getFullYear();
    var month = now.getMonth() + 1;
    var day = now.getDate();
    if (month < 10) {
        month = '0' + month;
    }
    if (day < 10) {
        day = '0' + day;
    }
    return year + '-' + month + '-' + day;
}
function openNewPage(url)
{
    var a = document.createElement("a");
    a.setAttribute("href", url);
    a.setAttribute("target");
    a.setAttribute("id", "openwin");
    document.body.appendChild(a);
    a.click();
}
function ajaxHandleCall(req,callback)
{
    if(!req || "object" !== typeof req)
    {
        return false;    
    }

    $.ajax({
        tyep : req.type,
        url : req.url,
        data : req.data + '&_t=' + new Date().getTime(),
        success : function(data){
            if(data)
            {
                callback(data);    
            }
        }
    });
}
function isDefined(property) 
{
    return 'undefined' !== typeof property;
}
function clickEvent(urlTracker,pageType)
{
    if(!isDefined(pageType) && !isDefined(urlTracker) && !isDefined(_paq))
        return false; 

    urlTracker = 'http://www.trackerlink.com/'+pageType+'/'+urlTracker;
    _paq.push(['trackLink', urlTracker, 'link']);
}
function searchEvent(pageType)
{
    var defaultStartDate = $('#defaultstartdate').val();
    var defaultEndDate = $('#defaultenddate').val();
    var startDate = $('#startdate').val();
    var endDate = $('#enddate').val();
    var url="defaultstartdate="+defaultStartDate+"&defaultenddate="+defaultEndDate+"&startdate="+startDate+"&enddate="+endDate;
    //clickEvent(url, pageType);
}
function flashChecker()
{
    var hasFlash=0;         //是否安装了flash
    var flashVersion=0; //flash版本
    var isIE=/*@cc_on!@*/0;      //是否IE浏览器

    if(isIE)
    {
        var swf = new ActiveXObject('ShockwaveFlash.ShockwaveFlash'); 
        if(swf) {
            hasFlash=1;
            VSwf=swf.GetVariable("$version");
            flashVersion=parseInt(VSwf.split(" ")[1].split(",")[0]); 
        }
    }else{
        if (navigator.plugins && navigator.plugins.length > 0)
        {
            var swf=navigator.plugins["Shockwave Flash"];
            if (swf)
            {
                hasFlash=1;
                var words = swf.description.split(" ");
                for (var i = 0; i < words.length; ++i)
                {
                    if (isNaN(parseInt(words[i]))) continue;
                    flashVersion = parseInt(words[i]);
                }
            }
        }
    }
    return {f:hasFlash,v:flashVersion};
}
function initDisplayLodgeUnitIndex(luidAndIndex)
{
    clickEvent('luidAndIndex_'+luidAndIndex,'search');
}
function setDialogHeight(dialogId)
{
    var dialogHeight = $("#"+dialogId).height();
    $('#'+dialogId).css({marginTop:'-'+dialogHeight/2+'px'});
    $('.ui-dialog-titlebar').hide();
}
function closeDialog(dialogId)
{
    $("#"+dialogId).dialog("close");
    return false;
}
function dateDiff(date1,date2)
{
    return parseInt((date2.getTime() - date1.getTime()) / (1000 * 60 * 60 * 24)); 
}
function CloseWebPage(){  
    if (navigator.userAgent.indexOf("MSIE") > 0) {  //IE浏览器
        if (navigator.userAgent.indexOf("MSIE 6.0") > 0) {  
            window.opener = null; window.close();  
        }  
        else {  
            window.open('', '_top'); window.top.close();  
        }  
    }  
    else if (navigator.userAgent.indexOf("Firefox") > 0) {  //火狐浏览器
        window.location.href = 'about:blank ';  
    }  
    else {     //其他浏览器
        window.opener = null;   
        window.open('', '_self', '');  
        window.close();  
    }  
}  

function chkstrlen(str) {     //检查输入的真实姓名的长度
    var strlen = 0;
    for(var i = 0;i < str.length; i++) {
        if(str.charCodeAt(i) > 255) { //如果是汉字，则字符串长度加2
            strlen += 2;
        }
        else { 
            strlen++;
        }
    }
    return   strlen;
}
function scrollPage(obj)
{
    var windowHeight = $(window).height();
    var offsetTop = parseInt(obj.offset().top);
    var scrollTop = $(document).scrollTop();
    var suggestionHeight = obj.height();
    if( (windowHeight - (offsetTop - scrollTop)) - suggestionHeight < 0 ) {
        var newTopHeight = scrollTop + (suggestionHeight + 10 ) - (windowHeight - (offsetTop - scrollTop)); 
        $('html,body').animate({ scrollTop: newTopHeight }, 300);
    }

}

 
 $(document).ready(function() {
    provinceChange("province","city");
});

function provinceChange(province,city)
{
    $('#' + province).change(
        function ()
        {
            var selectVal = $("#" + province).val();  
            var optionstring="<option value=\"\" >请选择</option>";
            $("#" + city).html(optionstring);
            $.ajax({
                type:"GET",
                url:XZWebUrlWriter.getWeb_GetCityUrl(selectVal),
                success:function(data){
                    var jsonObj=eval("("+data+")");
                    if(jsonObj && jsonObj.status != '0')
                    {
                            jsonObj   = jsonObj.sucmsg; 
                        var cityCount = jsonObj.count;
                        var cityList = jsonObj.city;
                        for(var item in cityList)
                        {
                            if(cityCount == 1)
                            {
                                optionstring += "<option selected=\"true\" value=\""+ item +"\" domain=\""+ cityList[item].domain +"\" >"+ cityList[item].cityname +"</option>";
                            }
                            else
                            {
                                optionstring += "<option value=\""+ item +"\" domain=\""+ cityList[item].domain +"\" >"+ cityList[item].cityname +"</option>";
                            }

                        }
                    }
                    $("#" + city).html(optionstring);
                }
            });
            if ($('#emptyInputValue').length > 0) {
                countUserInfoPercent($('#'+province));
            }
        });
}
 
 $(document).ready(function() {
    provinceChange("hometownprovince","hometowncity");
    $(".checkphonenum").click(function(){
        var intervalProcess = null;
        var usMobile = $("#mobile").val();
        initCodePostFormDialog(usMobile,intervalProcess);
});
    
$(".addmobilebak").click(function(){
        var intervalProcess = null;
        var mobilebak = $("#mobilebak").val();
        var type = 'mobilebak';
        initCodePostFormDialog(mobilebak,intervalProcess,type);
    });

$('.sns_ul li').mouseover(function(){
    $(this).children('.sns_hover').show();
});
$('.sns_ul li').mouseout(function(){
    $(this).children('.sns_hover').hide();
});
$('.bind_over').mouseover(function(){
    $(this).removeClass('tips_R');
    $(this).addClass('tips_C');
    $(this).text('解除绑定');
    $(this).css('cursor','pointer');
});
$('.bind_over').mouseout(function(){
    $(this).removeClass('tips_C');
    $(this).addClass('tips_R');
    $(this).text('绑定成功');
});
emptyInputValueDisplay($('#realname'));
Ajax_MakeAgeInfo();

function doUserPhoneCheck(type) {
    var phonenum  = $('#phonenum').val();
    var phonecode = $('#phonecode').val();
    $.ajax({
        type:"GET",
        url:XZWebUrlWriter.getAjax_SetUserPhoneCodeUrl(phonenum,phonecode,type), 
        success:function(data) {
            var dataObj=eval("("+data+")");
            if (dataObj && dataObj.error == '1') {
                $('#validation').hide();
                $('#failure').show();
            } else {
                $('#validation').hide();
                $('#success').show();
            }
        }
    });
}
function checkPhoneCode(phoneNum, phoneCode) {
    var showMeg  = $("#showMessage");
    var phoneMeg = $("#tip_phonenum");
    var codeMeg  = $("#tip_phonecode");
    var strRet   = false;
    if (phoneNum == "") {
        phoneMeg.html('<span>请输入手机号</span>');
        return false;
    } else if (phoneCode == "") {
        codeMeg.html('<span>请输入激活码</span>');
        return false;
    } else {
        $.ajax({
            type:"GET",
            url:XZWebUrlWriter.getAjax_SmsCheckCodeVerifyUrl(phoneNum,phoneCode), 
            async:false,
            success:function(data) {
                var dataObj = eval("("+data+")");
                if (dataObj && dataObj.status == '1') {
                    codeMeg.html('<span class="green">激活码正确</span>');
                    strRet = true;
                } else if (dataObj && dataObj.status == '0') {
                    codeMeg.html('<span>激活码不正确</span>');
                    strRet = false;
                } else {
                    codeMeg.html('<span>激活码不正确</span>');
                    strRet = false;
                }
            }
        });
        return strRet;
    }
}
function checkPhoneNum(phoneNum,type) {
    var showMeg   = $("#showMessage");
    var phoneMeg  = $("#tip_phonenum");
    var ereg      = xzRegularExpression.mobile;

    var usMobile = $("#mobile").val();
    if('undefined' !== typeof type && phoneNum == usMobile)
    {
        showMeg.html('<span>备用手机号码不能和主手机号码相同</span>');
        return false;
    }
    var strRet =false;
    if (phoneNum == "") {
        showMeg.html('<span>请输入手机号</span>');
        return false;
    } else if (!ereg.test(phoneNum)) {
        showMeg.html('<span>手机格式不正确</span>');
        return false;
    } else {
        $.ajax({
            type: "GET",
            url: XZWebUrlWriter.getAjax_PhoneIsNotExist_PhoneIsLoginUserUrl(phoneNum), 
            async:false,
            success:function(data) {
                if (data == 'true') {
                    showMeg.html('<span class="green">手机可以使用</span>');
                    strRet =true;
                    return true;

                } else {
                    showMeg.html('<span>手机已被认证过</span>');
                    strRet=false;
                    return false;
                }
            }
        });
        return strRet;
    }
}

function initCodePostFormDialog(mobile,intervalProcess,type)
{
    $('#CodePostForm').dialog({
        width : 460,
        height:320,
        bgiframe: true,
        resizable: false,
        modal:true,
        position: "center"
    });
    $('.ui-dialog-titlebar').hide();
    $('.ui-widget-overlay').css({background:'none repeat scroll 0 0 #000',opacity:'0.5'});
    $("#phonenum").val(mobile);

    $("#btnphonecode").click(function(){
        var phonenum = $("#phonenum").val();
        var imageFlag = blurImageCodeInfo(phonenum);
        if(!imageFlag)
        {
            return false;
        }
        var imagecode = $("#imagecodeInfo").val();
        var aisle    = $('#aisle').html();
        $("#showMessage").html("");
        if (phonenum == "") {
        $("#showMessage").html("<span>请输入您的手机号</span>");
            return;
        } else {
            $.ajax({
                type:"GET",
                url : XZWebUrlWriter.getAjax_SmsCheckCodeSendUrl(phonenum,imagecode,aisle), 
                success:function(data){
                    var dataObj = eval("("+data+")");
                    if (dataObj && dataObj.status == '0')
                    {
                        $("#showMessage").html("<span>"+dataObj.errmsg+"</span>");
                    }
                    else if (dataObj && dataObj.status == '1')
                    {
                        $('#TimeBox').show();
                        $('#btnphonecode').attr("disabled",true);
                        intervalProcess=setInterval(getnewtime,1000);
                        if (aisle == 1) {
                            $('#aisle').html('2');
                        } else {
                            $('#aisle').html('1');
                        }
                    }
                    else
                    {
                        $("#showMessage").html("<span>号码已被认证过，无法获取激活码。</span>")
                    }
                }
            });
        }
        });

    $("#phonecode").blur(function(){
            var phonenum    = $("#phonenum").val();
            var phonecode   = $("#phonecode").val();
            checkPhoneCode(phonenum,phonecode);
        });
    $("#phonenum").blur(function(){
            var phonenum  = $("#phonenum").val();
            checkPhoneNum(phonenum,type);
        });
    $('#check_sub').click(function(){
            var phonenum    = $("#phonenum").val();
            var phonecode   = $("#phonecode").val();
            gPhone = checkPhoneNum(phonenum,type);
            gCode  = checkPhoneCode(phonenum,phonecode);
            if (gPhone && gCode) {
                doUserPhoneCheck(type);
            }
        });

    $('#back_user').click(function(){
            $('#CodePostForm').dialog('close');
            window.location.reload();
        });
    $('#back_vail').click(function(){
            $('#validation').show();
            $('#tip_phonecode').html('');
            $('#success').hide();
            $('#failure').hide();
            $('#phonecode').val('');
            $('#check_sub').attr('class','reg-sucbtn');
        });

    function getnewtime()
    {
        var beforesecond = parseInt($("#leftsecond").html(),10);
        if( beforesecond <= 1) {
            $('#leftsecond').html('121');
            $('#showMessage').html('');
            $('#TimeBox').hide();
            $('#btnphonecode').attr('disabled',false);
            clearInterval(intervalProcess);
        }
        else {
            var leftsecond = beforesecond-1;
            $('#leftsecond').html(leftsecond);
        }
    }

}
 $('#alipayTrustAuthDialog').dialog({
     autoOpen:false,
     width : 330,
     resizable: false,
     modal:true,
     position: "center"
 });
 $('.ui-dialog-titlebar').hide();
 $('.ui-widget-overlay').css('background','none repeat scroll 0 0 #2c3e50');
});
function loadNyroModal()
{
    var width = 870;
    var height = 550;
    $('.nyroModal').nyroModal({
        sizes: {
            initW: width, initH: height,
            minW: width, minH: height,
            w: width, h: height
        },
        callbacks: {
            beforeShowCont: function() { 
                $('.nyroModalCont iframe').css({'height':$('.nyroModalCont').height(),'width':$('.nyroModalCont').width()});
            }
        }
    });

    var width2 = 800;
    var height2 = 500;
    $('.nyroModalRealName').nyroModal({
        sizes: {
            initW: width2, initH: height2,
            minW: width2, minH: height2,
            w: width2, h: height2
        },
        callbacks: {
            beforeShowCont: function() { 
                $('.nyroModalCont iframe').css({'height':$('.nyroModalCont').height(),'width':$('.nyroModalCont').width()}).attr('marginheight','0').attr('marginwidth','0');
            }
        }
    });
}
function unbindSnsOpenId(shareType) {
    if (shareType == "") 
        return false;
    $.ajax({
        type: "POST",
        url:XZWebUrlWriter.getAjax_UnbindSnsOpenIdUrl(shareType), 
        success: function(data) {
            var dataObj = eval("("+data+")");
            if (dataObj.status == 0) {
                alert(dataObj.errmsg);
            } else if (dataObj.status == 1) {
                alert('解绑成功');
                window.location.reload();
            }
        }
    });
}
function Ajax_MakeAgeInfo() {
    var year = $('#birYear').val();
    var month = $('#birMonth').val();
    var day = $('#birDay').val();
    if (year == '' && month == '' && day == '')
        return false;
    $.ajax({
        type: "POST",
        url:XZWebUrlWriter.getAjax_MakeAgeInfo(year,month,day), 
        success: function(data) {
            var dataObj = eval("("+data+")");
            if (dataObj.status == 0) {
                $('#age_info').html(dataObj.errmsg);
                return false;
            }
        }
    });
}
function countUserInfoPercent(obj) {
    var realname = $('#realname').val();
    var sex = $('input[name="sex"]:checked').val();
    var birYear = $('#birYear').val();
    var birMonth = $('#birMonth').val();
    var birDay = $('#birDay').val();
    var province = $('#province').val();
    var city = $('#city').val();
    var hometownprovince = $('#hometownprovince').val();
    var hometowncity = $('#hometowncity').val();
    var blood = $('#blood').val();
    var profession = $('#profession').val();
    var position = $('#position').val();
    var education = $('#education').val();
    var schoolname = $('#schoolname').val();
     
    var percent = 0;
    if (realname != '') {
        percent += 10;
    }
    if (sex != '') {
        percent += 10;
    }
    if (birYear != '' && birMonth != '' && birDay != '') {
        percent += 30;
    }
    if (obj.attr('id') == 'province' && (obj.val() == 1 || obj.val() == 2 || obj.val() == 3 || obj.val() == 4)) {
        if (province != '') {
            percent += 10;
        }
    } else {
        if (city != '' && province != '') {
            percent += 10;
        }
    }
    if (obj.attr('id') == 'hometownprovince' && (obj.val() == 1 || obj.val() == 2 || obj.val() == 3 || obj.val() == 4)) {
        if (hometownprovince != '') {
            percent += 10;
        }
    } else {
        if (hometownprovince != '' && hometowncity != '') {
            percent += 10;
        }
    }
    if (blood != '') {
        percent += 10;
    }
    if (profession != '' && profession != '请填写职业') {
        percent += 5;
    }
    if (position != '' && position != '请填写职位名称') {
        percent += 5;
    }
    if (education != '') {
        percent += 5;
    }
    if (schoolname != '' && schoolname != '请填写学校名称') {
        percent += 5;
    }
    $('.percent_num').html(percent+'%');
    emptyInputValueDisplay(obj);
}
function emptyInputValueDisplay(obj) {
    var realname = $('#realname').val();
    var sex = $('input[name="sex"]:checked').val();
    var birYear = $('#birYear').val();
    var birMonth = $('#birMonth').val();
    var birDay = $('#birDay').val();
    var province = $('#province').val();
    var city = $('#city').val();
    var hometownprovince = $('#hometownprovince').val();
    var hometowncity = $('#hometowncity').val();
    var blood = $('#blood').val();
    var profession = $('#profession').val();
    var position = $('#position').val();
    var education = $('#education').val();
    var schoolname = $('#schoolname').val();

    if (realname == '') {
        $('#emptyInputValue').empty().html('完成真实姓名，可<span class="orange_1">+10%</span>');
        return false;
    }
    if (sex == '') {
        $('#emptyInputValue').empty().html('完成性别，可<span class="orange_1">+10%</span>');
        return false;
    }
    if (birYear == '' || birMonth == '' || birDay == '') {
        $('#emptyInputValue').empty().html('完成出生日期，可<span class="orange_1">+30%</span>');
        return false;
    }
    if (obj.attr('id') == 'province' && (obj.val() == 1 || obj.val() == 2 || obj.val() == 3 || obj.val() == 4)) {
        if (province == '') {
            $('#emptyInputValue').empty().html('完成所在城市，可<span class="orange_1">+10%</span>');
            return false;
        }
    } else {
        if (province == '' || city == '') {
            $('#emptyInputValue').empty().html('完成所在城市，可<span class="orange_1">+10%</span>');
            return false;
        }
    }
    if (obj.attr('id') == 'hometownprovince' && (obj.val() == 1 || obj.val() == 2 || obj.val() == 3 || obj.val() == 4)) {
        if (hometownprovince == '') {
            $('#emptyInputValue').empty().html('完成故乡，可<span class="orange_1">+10%</span>');
            return false;
        }
    } else {
        if (hometownprovince == '' || hometowncity == '') {
            $('#emptyInputValue').empty().html('完成故乡，可<span class="orange_1">+10%</span>');
            return false;
        }
    }
    if (blood == '') {
        $('#emptyInputValue').empty().html('完成血型，可<span class="orange_1">+10%</span>');
        return false;
    }
    if (profession == '' || profession == '请填写职业') {
        $('#emptyInputValue').empty().html('完成职业，可<span class="orange_1">+5%</span>');
        return false;
    }
    if (position == '' || position == '请填写职位名称') {
        $('#emptyInputValue').empty().html('完成职位名称，可<span class="orange_1">+5%</span>');
        return false;
    }
    if (education == '') {
        $('#emptyInputValue').empty().html('完成学历，可<span class="orange_1">+5%</span>');
        return false;
    }
    if (schoolname == '' || schoolname == '请填写学校名称') {
        $('#emptyInputValue').empty().html('完成学校名称，可<span class="orange_1">+5%</span>');
        return false;
    }
    $('#emptyInputValue').empty();
    return false;
}

$('#fk_zhima_con').mouseover(function(){
    $('#fk_zhima_on').show();
})      
$('#fk_zhima_on').mouseout(function(){
    $('#fk_zhima_on').hide();
})
jQuery.fn.isChildAndSelfOf = function(b){
    return (this.closest(b).length > 0);
};
$(document).click(function(ev){
    ev = ev || window.event || arguments.callee.caller.arguments[0];
    var target = ev.target || ev.srcElement;
    if ($('#fk_zhima_on').is(':visible')) {
        if($(target).isChildAndSelfOf(".fk_zhima_con")) {
            return;
        }                                                                                                                                                                              
        $('#fk_zhima_on').hide(); 
    }                                                                                                                                                                                  
});


 
 
var alipaytruststart = 1441908000;// 1435429800;//1435775400
var alipaytrustend = 1441926000;
$(function(){
    $(".zhima_deposit_ico").hover(function(){
        $(this).children(".zhima_deposit_tip").show();
    },function(){
        $(this).children(".zhima_deposit_tip").hide();
    }); 
})
    
$('#alipayTrustAuth').live('click',function(){
    if((new Date().getTime()/1000)>= alipaytruststart && (new Date().getTime()/1000) < alipaytrustend){
        alert('芝麻信用系统在9月11日凌晨2:00~7:00期间系统维护，暂时无法进行授权，请稍后重试');
        return false; 
    }

    $("#alipayTrustAuthDialog").dialog("open");
    if($('#realname4alipay').val() != '')
        $('#realname4alipay').blur();
    if($('#certno4alipay').val() != '')
        $('#certno4alipay').blur();
})

function errorTip(obj,errorMsg)
{
    var tipIdName = obj.attr('id')+'-tip';
    $('#'+tipIdName).show();
    $('#'+tipIdName).html(errorMsg);
    return false;
}

function correctTip(obj)
{
    var tipIdName = obj.attr('id')+'-tip';
    $('#'+tipIdName).hide();
    return true;
}

$('#realname4alipay').blur(function(){
    return checkRealName4Alipay($(this));
})

$('#certno4alipay').blur(function(){
    return checkCertNo4Alipay($(this));
})

function checkRealName4Alipay()
{
   if($('#realname4alipay').val() == '') {
       return errorTip($('#realname4alipay'),'不能为空');
   }
   else if(chkstrlen($('#realname4alipay').val())>30){
       return errorTip($('#realname4alipay'),'不超过30个字符');
   }
   return correctTip($('#realname4alipay'));
}
function checkCertNo4Alipay()
{
    if($('#certno4alipay').val() == '') {
      return errorTip($('#certno4alipay'),'不能为空');
    }
    ruleResult = checkIdCardRule($('#certno4alipay').val()); 
    if (ruleResult.rst == false){
       return errorTip($('#certno4alipay'),'格式错误，请重新输入');
    }
    return correctTip($('#certno4alipay'));
}

$('#auth_btn').live('click',function(){
    var rs_realname = checkRealName4Alipay();
    var rs_certno = checkCertNo4Alipay();
    var actionUrl = $('#alipayTrustAuthForm').attr('action');
    if(rs_realname && rs_certno)
    {
        var realName = $('#realname4alipay').val();
        var certNo = $('#certno4alipay').val();
        var nextUrl = encodeURIComponent($('#nexturl4alipay').val());
        var aliview = $('#aliview').val();
        actionUrl += '&realname4alipay='+realName+'&certno4alipay='+certNo+'&aliview='+aliview+'&nexturl='+nextUrl;
        window.open(actionUrl);
        closeDialog('alipayTrustAuthDialog');
    }
})



 
 jQuery.validator.addMethod("checkNickName1",function(str){ return /^[\w|\u4E00-\u9FA5]*$/.test(str); }
, "昵称仅可使用汉字、字母、数字或下划线。");
jQuery.validator.addMethod("checkNickName2",function(str){ return ! /^\d{11}$/.test(str); }
, "手机号码不能作为昵称，请更换");
jQuery.validator.addMethod("checkNickName3",function(str){ return ! /(13|15|18)[0-9]{9}/.test(str); }
, "昵称中请勿出现手机、QQ、邮箱等联系方式");
jQuery.validator.addMethod("checkNickName4",function(str){ return ! /[1-9][0-9]{4}/.test(str); }
, "昵称中请勿出现手机、QQ、邮箱等联系方式");
jQuery.validator.addMethod("checkNickName5",function(str){ return ! /\w+((-|\.)\w+)*@[A-Za-z0-9]+((\.|-)[A-Za-z0-9]+)*\.[A-Za-z0-9]+/.test(str); }
, "昵称中请勿出现手机、QQ、邮箱等联系方式");
jQuery.validator.addMethod("checkRealName",function(str){ return /^([A-Za-z]|[\u4E00-\u9FA5])*$/.test(str); }
, "真实姓名仅可使用汉字、字母。");
jQuery.validator.addMethod("checkEmail",function(str){ return /^\w+((-|\.)\w+)*@[A-Za-z0-9]+((\.|-)[A-Za-z0-9]+)*\.[A-Za-z0-9]+$/.test(str); }
, "邮箱格式不正确");
jQuery.validator.addMethod("checkIdCardNo",function(str){ var checkIDCardNo = checkIdCardRule(str); return checkIDCardNo.rst; }, "证件号码格式不正确");
var validator = $("#userForm").validate({rules: {
nickname:{
required:true,
minlength:1,
maxlength:20,
checkNickName1:true,
checkNickName2:true,
checkNickName3:true,
checkNickName4:true,
checkNickName5:true,
remote:XZWebUrlWriter.getAjax_CheckNickNameUrlNoParam()
},
realname:{
required:true,
minlength:2,
maxlength:20,
checkRealName:true
},
cardno:{
required:true,
minlength:18,
maxlength:18,
checkIdCardNo:true
},
sex:'required',
province:'required',
city:'required',
email:{
required:true,
maxlength:50,
checkEmail:true,
remote:XZWebUrlWriter.getAjax_CheckEmailUrlNoParam()
}
},
messages: {
nickname:{
required:"昵称为4-20个字符（汉字、字母、数字、下划线）",
minlength:jQuery.format("请输入至少{0}个字符 "),
maxlength:jQuery.format("请输入至多{0}个字符 "),
remote:'该用户名已存在'
},
realname:{
required:"真实姓名为2-10个汉字或2-20个英文",
minlength:jQuery.format("请输入至少{0}个字符 "),
maxlength:jQuery.format("请输入至多{0}个字符 ")
},
cardno:{
required:"请输入您的证件号码",
minlength:jQuery.format("证件号码位数不正确"),
maxlength:jQuery.format("证件号码位数不正确")
},
sex:"请选择性别。",
province:"请选择省份。",
city:"请选择城市。",
email:{
required:"邮箱格式不正确",
maxlength:jQuery.format("请输入至多{0}个字符 "),
remote:'该邮箱地址已被注册'
}
},
errorElement:"span",errorPlacement: function(error, element) {
var elementId = element.attr('id');
var tip_elementId = 'tip_'+elementId;
$('#'+tip_elementId).html(error).show().addClass('check');
}
})

 
 $("#checkEmail").click(function(){
    var email = $.trim($('#email').val());
    if(email == '') {
        $('#tip_email').addClass('warning').html('请输入邮箱');
        return false;
    }
    else {
        var reg = /^\w+((-|\.)\w+)*@[A-Za-z0-9]+((\.|-)[A-Za-z0-9]+)*\.[A-Za-z0-9]+$/;
        if(!reg.test(email)){
            $('#tip_email').addClass('warning').html('邮箱格式不正确');
            return false;
        }
        else {
            var userid = $.trim($('#userid').val());
            
            $.ajax({
                type: "GET",
                url: XZWebUrlWriter.getAjax_CheckEmailUrl(email),
                async:false,
                success:function(data) {
                    if(data == 'false') {
                        $('#tip_email').addClass('warning').html('邮箱已经存在');
                        return false;
                    }
                    else {
                        $.ajax({
                            type: "GET",
                            url:XZWebUrlWriter.getAjax_SendActiveEmailUrl(email),
                            async:false,
                            success:function(data) {
                                if (data == 'true') {
                                    $('#tip_email').remove('warning').html('请进入邮箱进行激活');
                                    return true;
                                } else {
                                    $('#tip_email').addClass('warning').html('发送失败，请检查输入的邮箱账号，稍后重试');
                                    return false;
                                }
                            }
                        });
                    }
                }
            })
        }
    }
})
 
 function getBirthdayByIdCard(cardNo)
{
    var cardNoVal = cardNo.replace(/\s/g,"");
    var len = cardNoVal.length;
    var birth = '';
    if(len != 15 && len !=18)
    {
        return false;
    }
    if(len == 15)
    {
        if(!(/^(\d{6})(\d{2})(\d{2})(\d{2})(\d{3})$/.test(cardNoVal)))
        {
            return false;
        }
        else 
        {
            reg = new RegExp(/^(\d{6})(\d{2})(\d{2})(\d{2})(\d{3})$/);   
            cardNoSplit = cardNoVal.match(reg);
            birth = new Date('19' + cardNoSplit[2] + '/' + cardNoSplit[3] + '/' + cardNoSplit[4]);   
        }
    }
    else if(len == 18)
    {
        if(!(/^(\d{6})(19|20)?(\d{2})([01]\d)([0123]\d)(\d{3})(\d|X|x)?$/.test(cardNoVal)))
        {
            return false;
        }
        else 
        {
            reg = new RegExp(/^(\d{6})(\d{4})(\d{2})(\d{2})(\d{3})([0-9]|X|x)$/);
            cardNoSplit = cardNoVal.match(reg);
            birth = new Date(cardNoSplit[2] + "/" + cardNoSplit[3] + "/" + cardNoSplit[4]);   
        }
    }
    var fullMonth = birth.getMonth() + 1;
    var fullDate = birth.getDate();
    if( fullMonth < 10) {
        fullMonth = '0'+ fullMonth;
    }
    if( birth.getDate() < 10) {
        fullDate = '0'+birth.getDate();
    }
    return  birth.getFullYear()+'-'+ fullMonth +'-'+ fullDate ;
}
function getSexByIdCard(cardNo)
{
    var cardNoVal = cardNo.replace(/\s/g,"");
    var len = cardNo.length;
    if(len != 15 && len !=18)
    {
        return false;
    }
    var sex = '';
    if (parseInt(cardNoVal.substr(16, 1)) % 2 == 1)
    {
        return 'man';
    }
    else {
        return 'women';
    }
}
function checkIdCardRule(cardNo)
{
    var returnContent = {};
    returnContent.msg = '';
    returnContent.rst = true;
    var len = cardNo.length;
    if(!cardNo){
        returnContent.msg = '请输入您的证件号码';
        returnContent.rst = false;
        return returnContent;   
    }
    if(len != 15 && len !=18)
    {
        returnContent.msg = '证件号码位数不正确';
        returnContent.rst = false;
        return returnContent;
    }
    var reg;
    var cardNoSplit;
    var bGoodDay;   
    var birth;
    if(len == 15)
    {
        if(!(/^(\d{6})(\d{2})(\d{2})(\d{2})(\d{3})$/.test(cardNo)))
        {
            returnContent.msg = '证件号码格式不正确';
            returnContent.rst = false;
        }
        else 
        {
            reg = new RegExp(/^(\d{6})(\d{2})(\d{2})(\d{2})(\d{3})$/);   
            cardNoSplit = cardNo.match(reg);
            birth = new Date('19' + cardNoSplit[2] + '/' + cardNoSplit[3] + '/' + cardNoSplit[4]);   
            bGoodDay = (birth.getYear() == Number(cardNoSplit[2])) && ((birth.getMonth() + 1) == Number(cardNoSplit[3])) && (birth.getDate() == Number(cardNoSplit[4]));   
        }
    }
    else if(len == 18)
    {
        if(!(/^(\d{6})(19|20)?(\d{2})([01]\d)([0123]\d)(\d{3})(\d|X|x)?$/.test(cardNo)))
        {
            returnContent.msg = '证件号码格式不正确';
            returnContent.rst = false;
        }
        else 
        {
            reg = new RegExp(/^(\d{6})(\d{4})(\d{2})(\d{2})(\d{3})([0-9]|X|x)$/);
            cardNoSplit = cardNo.match(reg);
            birth = new Date(cardNoSplit[2] + "/" + cardNoSplit[3] + "/" + cardNoSplit[4]);   
            bGoodDay = (birth.getFullYear() == Number(cardNoSplit[2])) && ((birth.getMonth() + 1) == Number(cardNoSplit[3])) && (birth.getDate() == Number(cardNoSplit[4]));   

        }
    }
    if (!bGoodDay) 
    { 
        returnContent.msg = '证件号码格式不正确';
        returnContent.rst = false;
    }
    else 
    {
        var nowYear = new Date().getFullYear();
        var nowMonth = new Date().getMonth();
        var nowDate = new Date().getDate();

        if( compareBirthDate(birth.getFullYear()+'-'+birth.getMonth()+'-'+birth.getDate(), ((nowYear-102)+"-"+nowMonth+"-"+nowDate))<0 || compareBirthDate(birth.getFullYear()+'-'+birth.getMonth()+'-'+birth.getDate(), (nowYear+"-"+nowMonth+"-"+nowDate))>0)
        {
            returnContent.msg = '证件号码格式不正确';
            returnContent.rst = false;
        }
        else 
        {
            if(len == 15)
            {
                return returnContent;
            }
            else{
            // check city
            var aCity={11:"北京",12:"天津",13:"河北",14:"山西",15:"内蒙古",21:"辽宁",22:"吉林",23:"黑龙江",31:"上海",32:"江苏",33:"浙江",34:"安徽",35:"福建",36:"江西",37:"山东",41:"河南",42:"湖北",43:"湖南",44:"广东",45:"广西",46:"海南",50:"重庆",51:"四川",52:"贵州",53:"云南",54:"西藏",61:"陕西",62:"甘肃",63:"青海",64:"宁夏",65:"新疆",71:"台湾",81:"香港",82:"澳门",91:"国外"};
            if(aCity[parseInt(cardNo.substr(0,2))]==null)
            {
                returnContent.msg = '证件号码格式不正确';
                returnContent.rst = false;
            }
            var arrExp = [7, 9, 10, 5, 8, 4, 2, 1, 6, 3, 7, 9, 10, 5, 8, 4, 2];//加权因子  
            var arrValid = [1, 0, "X", 9, 8, 7, 6, 5, 4, 3, 2];//校验码  
            var sum = 0, idx;  
            for(var i = 0; i < cardNo.length - 1; i++){  
                sum += parseInt(cardNo.substr(i, 1), 10) * arrExp[i];  
            }  
            idx = sum % 11;  
            // 检验第18为是否与校验码相等  
            if( arrValid[idx] != cardNo.substr(17, 1).toUpperCase()) 
            {
                returnContent.msg = '证件号码格式不正确';
                returnContent.rst = false;
            }
            }
        }
    }
    return returnContent;
    
}
function cardNoFormat(obj) 
{
    var cardNo = obj.val();
    var cardNoTip = obj.parent().children(".tip_number");
    if(cardNo.length > 0)
    {
        cardNoTip.show();
        cardNoTip.html(obj.val()); 
    }else
    {
        cardNoTip.hide();     
    }
}
function formatCardNo(cardNo) 
{
    //3+3+8+4
    cardNo = cardNo.replace(/\s/g,'');
    var newCardNo = '';
    var cardNo_tmp = cardNo;
    if(cardNo.length > 3)
    {
        newCardNo += cardNo.substr(0,3)+' ';
        cardNo_tmp = cardNo.substr(3,cardNo.length-3);
        cardNo = cardNo_tmp;
        if(cardNo.length > 3)
        {
            newCardNo += cardNo.substr(0,3)+' ';
            cardNo_tmp = cardNo.substr(3,cardNo.length-3);
            cardNo = cardNo_tmp;
            if(cardNo.length > 8)
            {
                newCardNo += cardNo.substr(0,8)+' '+cardNo.substr(8,cardNo.length-8);
            }else
            {
                newCardNo += cardNo;    
            }
        }else
        {
            newCardNo += cardNo;    
        }
    }else
    {
        newCardNo += cardNo;    
    }
    return newCardNo;
}
 
 function getShortWeekNameByDate(date)
{
    var week = new Array("周日", "周一", "周二", "周三", "周四", "周五", "周六");
    return week[new Date(date).getDay()];
}
function getDateDiff(sDate1, sDate2){
    var sDate = new Date(sDate1.replace(/-/g, "/"));
    var eDate = new Date(sDate2.replace(/-/g, "/"));
    var timediff = eDate.getTime() - sDate.getTime();
    var daydiff = parseInt(timediff/1000/60/60/24);
    return daydiff;
}  
function compareBirthDate(date1,date2)
{
    var newDate1 = date1.split('-');
    var dateY1 = newDate1[0];
    var dateM1 = newDate1[1];
    var dateD1 = newDate1[2];

    var newDate2 = date2.split('-');
    var dateY2 = newDate2[0];
    var dateM2 = newDate2[1];
    var dateD2 = newDate2[2];

    if(dateY1<dateY2)
    {
        return -1;
    }
    else if(dateY1>dateY2)
    {
        return 1;
    }
    else if(dateY1 == dateY2)
    {
        if(dateM1<dateM2)
        {
            return -1;
        }
        else if(dateM1>dateM2)
        {
            return 1;
        }
        else if(dateM1 == dateM2)
        {
            if(dateD1<dateD2)
            {
                return -1;
            }
            else if(dateD1>dateD2)
            {
                return 1;
            }
            else if(dateD1 == dateD2)
            {
                return 0;
            }
        }
    }
}
